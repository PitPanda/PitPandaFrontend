{"version":3,"file":"index.es.js","sources":["../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../src/ToggleLayer/useEvent.tsx","../src/ToggleLayer/useOutsideClick.tsx","../src/ToggleLayer/useOnScroll.tsx","../src/ToggleLayer/useOnWindowResize.tsx","../src/ToggleLayer/useIsomorphicLayoutEffect.tsx","../src/ToggleLayer/useTrackElementResize.tsx","../src/ToggleLayer/util.tsx","../src/ToggleLayer/useStyleState.tsx","../src/ToggleLayer/anchor.tsx","../src/ToggleLayer/style/getAbsolutePositions.tsx","../src/ToggleLayer/rect/getLayerRectByAnchor.tsx","../src/ToggleLayer/rect/index.tsx","../src/ToggleLayer/style/getSuitableAnchor.tsx","../src/ToggleLayer/style/getSecondaryOffset.tsx","../src/ToggleLayer/style/getArrowStyle.tsx","../src/ToggleLayer/style/index.tsx","../src/ToggleLayer/getPositioning.tsx","../src/ToggleLayer/useElementRef.tsx","../src/ToggleLayer/findScrollContainers.tsx","../src/ToggleLayer/useElementState.tsx","../src/ToggleLayer/useIsOpen.tsx","../src/ToggleLayer/ToggleLayer.tsx","../src/ToggleLayer/Arrow.tsx","../src/ToggleLayer/useToggleLayer.tsx","../src/useHover.tsx","../src/useBreakpoint.tsx","../src/Transition.tsx","../src/useTooltip.tsx"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import * as React from \"react\";\n\ntype EventListenable = {\n  addEventListener: any;\n  removeEventListener: any;\n};\n\nexport default function useEvent<T extends EventListener>(\n  element: EventListenable | EventListenable[] | null,\n  event: string | string[],\n  callback: T,\n  enabled = true,\n  capture = false\n) {\n  return React.useEffect(() => {\n    if (!enabled || !element) {\n      return;\n    }\n\n    const cb = callback;\n\n    const el = Array.isArray(element) ? element : [element];\n    const ev = Array.isArray(event) ? event : [event];\n\n    el.forEach(e => {\n      ev.forEach(event => {\n        e.addEventListener(event as any, cb, capture);\n      });\n    });\n\n    return () => {\n      el.forEach(e => {\n        ev.forEach(event => {\n          e.removeEventListener(event as any, cb, capture);\n        });\n      });\n    };\n  }, [callback, element, enabled, event, capture]);\n}\n","import React from \"react\";\n\nimport useEvent from \"./useEvent\";\n\nexport const OutsideClickContext = React.createContext({} as (\n  layer: React.RefObject<HTMLElement | null | undefined>\n) => void);\n\nfunction isChildOf(parent: HTMLElement, target: HTMLElement) {\n  if (parent === target) {\n    return true;\n  }\n\n  const hasChildren = parent.children && parent.children.length > 0;\n\n  if (hasChildren) {\n    // tslint:disable-next-line\n    for (let i = 0; i < parent.children.length; i++) {\n      const child = parent.children[i];\n      if (child && isChildOf(child as HTMLElement, target)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\ntype OutsideClickGroupProviderProps = {\n  refs: React.MutableRefObject<\n    Set<React.RefObject<HTMLElement | null | undefined>>\n  >;\n  children: any;\n};\n\nexport function OutsideClickGroupProvider({\n  refs,\n  children\n}: OutsideClickGroupProviderProps) {\n  const isPartOfGroup =\n    typeof React.useContext(OutsideClickContext) === \"function\";\n\n  if (isPartOfGroup) {\n    return children;\n  }\n\n  return (\n    <OutsideClickContext.Provider\n      value={React.useCallback(layerRef => {\n        refs.current.add(layerRef);\n      }, [])}\n    >\n      {children}\n    </OutsideClickContext.Provider>\n  );\n}\n\nfunction useRegisterGroup(\n  refs: React.MutableRefObject<\n    Set<React.RefObject<HTMLElement | null | undefined>>\n  >\n) {\n  const registerRefToGroup = React.useContext(OutsideClickContext);\n\n  React.useEffect(() => {\n    const [layerRef] = refs.current.values();\n\n    if (typeof registerRefToGroup === \"function\" && layerRef) {\n      registerRefToGroup(layerRef);\n    }\n  }, [registerRefToGroup, refs]);\n}\n\nfunction useOutsideClick(\n  refs: React.MutableRefObject<\n    Set<React.RefObject<HTMLElement | null | undefined>>\n  >,\n  callback: () => void\n) {\n  const [events] = React.useState([\"click\"]);\n\n  useRegisterGroup(refs);\n\n  useEvent(\n    typeof document !== \"undefined\" ? document : null,\n    events,\n    React.useCallback(\n      (evt: any) => {\n        for (const ref of refs.current) {\n          if (!ref.current) {\n            continue;\n          }\n\n          if (isChildOf(ref.current, evt.target as HTMLElement)) {\n            return;\n          }\n        }\n\n        callback();\n      },\n      [callback]\n    ),\n    true,\n\n    true\n  );\n}\n\nexport default useOutsideClick;\n","import * as React from \"react\";\n\nimport useEvent from \"./useEvent\";\n\nfunction useOnScroll(\n  elements: HTMLElement[],\n  onScroll: (event: Event) => void,\n  environment?: Window,\n  trackScroll = true\n) {\n  const memoElements = React.useMemo(\n    () =>\n      typeof environment !== \"undefined\" ? [environment, ...elements] : [],\n    [elements]\n  );\n  useEvent(memoElements, \"scroll\", onScroll, trackScroll);\n}\n\nexport default useOnScroll;\n","import useEvent from \"./useEvent\";\n\nfunction useOnWindowResize(\n  onResize: (event: Event) => void,\n  environment?: Window,\n  trackResize = true\n) {\n  useEvent(\n    typeof environment !== \"undefined\" ? environment : null,\n    \"resize\",\n    onResize,\n    trackResize\n  );\n}\n\nexport default useOnWindowResize;\n","import * as React from \"react\";\nconst useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\n\nexport default useIsomorphicLayoutEffect;\n","import * as React from \"react\";\nimport useIsomorphicLayoutEffect from \"./useIsomorphicLayoutEffect\";\n\nexport default function useTrackElementResize(\n  injectedResizeObserver: any,\n  layerRef: React.RefObject<HTMLElement>,\n  triggerElement: HTMLElement | null,\n  isOpen: boolean,\n  callback: () => void,\n  environment?: Window\n) {\n  const callbackRef = React.useRef(callback);\n  callbackRef.current = callback;\n\n  const ResizeObserver =\n    injectedResizeObserver ||\n    (typeof environment === \"undefined\"\n      ? class ResizeObserver {}\n      : (environment as any).ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error(\n      \"This browser does not support `ResizeObserver` out of the box. Please provide a polyfill as a prop.\"\n    );\n  }\n\n  const resizeObserver = React.useRef(\n    new ResizeObserver(() => {\n      if (layerRef.current) {\n        callbackRef.current();\n      }\n    })\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (isOpen) {\n      if (triggerElement) {\n        resizeObserver.current.observe(triggerElement);\n      }\n    } else {\n      if (triggerElement) {\n        resizeObserver.current.unobserve(triggerElement);\n      }\n      if (layerRef.current) {\n        resizeObserver.current.unobserve(layerRef.current);\n      }\n    }\n  }, [isOpen, triggerElement]);\n\n  React.useEffect(() => {\n    return () => {\n      resizeObserver.current.disconnect();\n    };\n  }, []);\n\n  return resizeObserver.current;\n}\n","import { ResultingStyles } from \"./types\";\n\nexport const EMPTY_STYLE: React.CSSProperties = {};\n\nexport function isSet<T>(value: T) {\n  return value !== undefined && value !== null;\n}\n\nfunction areStylesTheSame(a: React.CSSProperties, b: React.CSSProperties) {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n\n  if (aKeys.length !== bKeys.length) {\n    return false;\n  }\n\n  for (let i = 0; i < Math.max(aKeys.length, bKeys.length); i++) {\n    const key: keyof React.CSSProperties = aKeys[i] || (bKeys[i] as any);\n\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function shouldUpdateStyles(\n  prev: ResultingStyles,\n  next: ResultingStyles\n) {\n  if (\n    areStylesTheSame(prev.layer, next.layer) &&\n    areStylesTheSame(prev.arrow, next.arrow)\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\n// creates a ClientRect-like object from the viewport's dimensions\nexport function getWindowClientRect(environment?: Window): ClientRect {\n  return {\n    top: 0,\n    left: 0,\n    right: environment ? environment.innerWidth : 0,\n    bottom: environment ? environment.innerHeight : 0,\n    height: environment ? environment.innerHeight : 0,\n    width: environment ? environment.innerWidth : 0\n  };\n}\n\nconst convertFloat = (value: string) => parseFloat(value.replace(\"px\", \"\"));\n\n// get the outer width / height of an element\n// We effectively want the same width / height that `getBoundingClientRect()`\n// gives, minus optional `scale` transforms\nexport function getContentBox(element: HTMLElement, environment?: Window) {\n  if (!environment) {\n    return { width: 0, height: 0 };\n  }\n\n  const {\n    width,\n    height,\n    boxSizing,\n    borderLeft,\n    borderRight,\n    borderTop,\n    borderBottom,\n    paddingLeft,\n    paddingRight,\n    paddingTop,\n    paddingBottom\n  } = environment.getComputedStyle(element);\n\n  return {\n    width:\n      boxSizing === \"border-box\"\n        ? convertFloat(width!)\n        : [width, borderLeft, borderRight, paddingLeft, paddingRight].reduce(\n            (total, value) => total + (value ? convertFloat(value!) : 0),\n            0\n          ),\n    height:\n      boxSizing === \"border-box\"\n        ? convertFloat(height!)\n        : [height, borderTop, borderBottom, paddingTop, paddingBottom].reduce(\n            (total, value) => total + (value ? convertFloat(value!) : 0),\n            0\n          )\n  };\n}\n\n// converts a ClientRect (or DOMRect) to a plain js-object\n// usefull for destructuring for instance\nexport function clientRectToObject(clientRect: ClientRect): ClientRect {\n  return {\n    top: clientRect.top,\n    left: clientRect.left,\n    right: clientRect.right,\n    bottom: clientRect.bottom,\n    width: clientRect.width,\n    height: clientRect.height\n  };\n}\n\nexport function getElementFromAnchorNode(anchorNode: Node): HTMLElement | null {\n  let currentElement = anchorNode as HTMLElement;\n\n  while (!currentElement.getBoundingClientRect) {\n    if (!currentElement.parentElement) {\n      return null;\n    }\n\n    currentElement = currentElement.parentElement;\n  }\n\n  return currentElement;\n}\n\nexport function minMax(\n  value: number,\n  { min, max }: { min: number; max: number }\n): number {\n  return value < min ? min : value > max ? max : value;\n}\n","import * as React from \"react\";\n\nimport { AnchorEnum, ResultingStyles, LayerSide } from \"./types\";\nimport { EMPTY_STYLE } from \"./util\";\n\nexport default function useStyleState(anchor: AnchorEnum) {\n  const [INITIAL_STYLES] = React.useState<ResultingStyles>({\n    layer: EMPTY_STYLE,\n    arrow: EMPTY_STYLE,\n    layerSide: anchor.split(\"_\")[0].toLowerCase() as LayerSide\n  });\n\n  const [styles, setStyles] = React.useState<ResultingStyles>(INITIAL_STYLES);\n  const lastStyles = React.useRef<ResultingStyles>(styles);\n\n  return {\n    styles,\n    lastStyles,\n    setStyles,\n    resetLastStyles: () => {\n      lastStyles.current = INITIAL_STYLES;\n    }\n  };\n}\n","import {\n  AnchorEnum,\n  Direction,\n  Primary,\n  Side,\n  LayerSide,\n  Rects\n} from \"./types\";\n\nexport const Anchor: Record<Exclude<AnchorEnum, \"CENTER\">, AnchorEnum> = {\n  BOTTOM_LEFT: \"BOTTOM_LEFT\",\n  BOTTOM_RIGHT: \"BOTTOM_RIGHT\",\n  BOTTOM_CENTER: \"BOTTOM_CENTER\",\n  TOP_LEFT: \"TOP_LEFT\",\n  TOP_CENTER: \"TOP_CENTER\",\n  TOP_RIGHT: \"TOP_RIGHT\",\n  LEFT_BOTTOM: \"LEFT_BOTTOM\",\n  LEFT_CENTER: \"LEFT_CENTER\",\n  LEFT_TOP: \"LEFT_TOP\",\n  RIGHT_BOTTOM: \"RIGHT_BOTTOM\",\n  RIGHT_CENTER: \"RIGHT_CENTER\",\n  RIGHT_TOP: \"RIGHT_TOP\"\n};\n\nexport const POSSIBLE_ANCHORS = Object.keys(Anchor) as AnchorEnum[];\n\nexport const PRIMARY_OPPOSITES: Record<Primary, Primary> = {\n  TOP: \"BOTTOM\",\n  BOTTOM: \"TOP\",\n  LEFT: \"RIGHT\",\n  RIGHT: \"LEFT\"\n};\n\nexport function getPrimaryDirection(anchor: AnchorEnum): Direction {\n  return anchor.startsWith(\"TOP_\") || anchor.startsWith(\"BOTTOM_\") ? \"Y\" : \"X\";\n}\n\nfunction primaryIsY(primary: Primary) {\n  return primary === \"TOP\" || primary === \"BOTTOM\";\n}\n\nfunction getPrimaryByIndex(\n  index: number,\n  preferedPrimary: Primary,\n  preferedX: \"LEFT\" | \"RIGHT\",\n  preferedY: \"TOP\" | \"BOTTOM\"\n): Primary {\n  const prefferedIsY = primaryIsY(preferedPrimary);\n\n  if (index < 3) {\n    return preferedPrimary;\n  }\n  if (index < 6) {\n    return prefferedIsY ? preferedX : preferedY;\n  }\n  if (index < 9) {\n    if (prefferedIsY) {\n      return [\"LEFT\", \"RIGHT\"].filter(x => x !== preferedX)[0] as Primary;\n    } else {\n      return [\"TOP\", \"BOTTOM\"].filter(x => x !== preferedY)[0] as Primary;\n    }\n  }\n\n  if (prefferedIsY) {\n    return [\"TOP\", \"BOTTOM\"].filter(x => x !== preferedPrimary)[0] as Primary;\n  } else {\n    return [\"LEFT\", \"RIGHT\"].filter(x => x !== preferedPrimary)[0] as Primary;\n  }\n}\n\nfunction getSecondaryByIndex(\n  index: number,\n  preferedPrimary: Primary,\n  preferedSecondary: Side,\n  rects: Rects\n): Side {\n  const prefferedIsY = primaryIsY(preferedPrimary);\n\n  const triggerHasBiggerHeight = rects.trigger.height > rects.layer.height;\n  const triggerHasBiggerWidth = rects.trigger.width > rects.layer.width;\n\n  switch (index) {\n    case 9:\n    case 0:\n      return preferedSecondary;\n\n    case 1:\n    case 10: {\n      if (preferedSecondary === \"CENTER\") {\n        return prefferedIsY ? \"RIGHT\" : \"BOTTOM\";\n      }\n\n      return \"CENTER\";\n    }\n\n    case 4:\n    case 7:\n      return \"CENTER\";\n\n    case 2:\n    case 11: {\n      if (prefferedIsY) {\n        return [\"LEFT\", \"RIGHT\"].filter(\n          x => x !== preferedSecondary\n        )[0] as Side;\n      } else {\n        return [\"TOP\", \"BOTTOM\"].filter(\n          x => x !== preferedSecondary\n        )[0] as Side;\n      }\n    }\n\n    case 3:\n    case 6: {\n      if (prefferedIsY) {\n        return preferedPrimary === \"BOTTOM\"\n          ? triggerHasBiggerHeight\n            ? \"BOTTOM\"\n            : \"TOP\"\n          : triggerHasBiggerHeight\n          ? \"TOP\"\n          : \"BOTTOM\";\n      }\n\n      return preferedPrimary === \"LEFT\"\n        ? triggerHasBiggerWidth\n          ? \"LEFT\"\n          : \"RIGHT\"\n        : triggerHasBiggerWidth\n        ? \"RIGHT\"\n        : \"LEFT\";\n    }\n\n    case 5:\n    case 8: {\n      if (prefferedIsY) {\n        return preferedPrimary === \"BOTTOM\"\n          ? triggerHasBiggerHeight\n            ? \"TOP\"\n            : \"BOTTOM\"\n          : triggerHasBiggerHeight\n          ? \"BOTTOM\"\n          : \"TOP\";\n      }\n\n      return preferedPrimary === \"LEFT\"\n        ? triggerHasBiggerWidth\n          ? \"RIGHT\"\n          : \"LEFT\"\n        : triggerHasBiggerWidth\n        ? \"LEFT\"\n        : \"RIGHT\";\n    }\n  }\n\n  /* istanbul ignore next */\n  return \"LEFT\";\n}\n\nexport function getSecondaryAnchorOptionsByPrimary(\n  primary: Primary,\n  anchorOptions: AnchorEnum[]\n) {\n  return anchorOptions.filter(anchor => anchor.startsWith(primary));\n}\n\ntype SplitAnchor = {\n  primary: Primary;\n  secondary: Side;\n};\n\nexport function splitAnchor(anchor: AnchorEnum): SplitAnchor {\n  const [primary, secondary] = anchor.split(\"_\") as [Primary, Side];\n\n  return { primary, secondary };\n}\n\nexport function getLayerSideByAnchor(anchor: AnchorEnum): LayerSide {\n  if (anchor === \"CENTER\") {\n    return \"center\";\n  }\n\n  return splitAnchor(anchor).primary.toLowerCase() as LayerSide;\n}\n\nexport function getAnchorPriority(\n  preferedAnchor: AnchorEnum,\n  possibleAnchors: AnchorEnum[],\n  preferedX: \"LEFT\" | \"RIGHT\",\n  preferedY: \"TOP\" | \"BOTTOM\",\n  rects: Rects\n) {\n  const { primary, secondary } =\n    preferedAnchor !== \"CENTER\"\n      ? splitAnchor(preferedAnchor)\n      : {\n          primary: preferedY as Primary,\n          secondary: \"CENTER\" as Side\n        };\n\n  let anchors = POSSIBLE_ANCHORS.map((_, index) => {\n    return `${getPrimaryByIndex(\n      index,\n      primary,\n      preferedX,\n      preferedY\n    )}_${getSecondaryByIndex(index, primary, secondary, rects)}` as AnchorEnum;\n  }).filter(anchor => possibleAnchors.indexOf(anchor) > -1);\n\n  // include prefered anchor if not included in possibleAnchors\n  if (anchors.indexOf(preferedAnchor) === -1) {\n    /* istanbul ignore next */\n    anchors = [preferedAnchor, ...anchors];\n  }\n\n  return anchors;\n}\n","import { Rects, Primary, Side, Direction, AnchorEnum } from \"../types\";\nimport { minMax } from \"../util\";\n\nimport { splitAnchor, getPrimaryDirection } from \"../anchor\";\n\ntype Scroll = { top: number; left: number };\n\nfunction getPrimaryStyle(\n  primary: Primary,\n  rects: Rects,\n  scroll: Scroll,\n  triggerOffset: number\n) {\n  const prop = primary === \"TOP\" || primary === \"BOTTOM\" ? \"top\" : \"left\";\n  const size = primary === \"TOP\" || primary === \"BOTTOM\" ? \"height\" : \"width\";\n\n  if (primary === \"TOP\" || primary === \"LEFT\") {\n    return {\n      [prop]:\n        rects.trigger[prop] -\n        rects.layer[size] -\n        (rects.relativeParent[prop] - scroll[prop]) -\n        triggerOffset\n    };\n  }\n\n  return {\n    [prop]:\n      rects.trigger[prop] +\n      rects.trigger[size] -\n      (rects.relativeParent[prop] - scroll[prop]) +\n      triggerOffset\n  };\n}\n\nfunction getCenter(\n  rects: Rects,\n  scroll: Scroll,\n  offsetSecondary: number,\n  prop: \"top\" | \"left\",\n  size: \"width\" | \"height\"\n) {\n  return minMax(\n    rects.trigger[prop] -\n      rects.relativeParent[prop] +\n      scroll[prop] +\n      rects.trigger[size] / 2 -\n      rects.layer[size] / 2 -\n      offsetSecondary,\n    getLimits(rects, scroll)[prop]\n  );\n}\n\nfunction getLimits(rects: Rects, scroll: Scroll) {\n  const topBase = rects.trigger.top - rects.relativeParent.top + scroll.top;\n  const leftBase = rects.trigger.left - rects.relativeParent.left + scroll.left;\n\n  return {\n    top: {\n      min: topBase - (rects.layer.height - rects.arrow.height),\n      max: topBase + (rects.trigger.height - rects.arrow.height)\n    },\n    left: {\n      min: leftBase - (rects.layer.width - rects.arrow.width),\n      max: leftBase + (rects.trigger.width - rects.arrow.width)\n    }\n  };\n}\n\nfunction getSecondaryStyle(\n  secondary: Side,\n  rects: Rects,\n  scroll: Scroll,\n  offsetSecondary: number,\n  primaryDirection: Direction\n) {\n  if (secondary === \"CENTER\") {\n    const prop = primaryDirection === \"X\" ? \"top\" : \"left\";\n    const size = primaryDirection === \"X\" ? \"height\" : \"width\";\n\n    return {\n      [prop]: getCenter(rects, scroll, offsetSecondary, prop, size)\n    };\n  }\n\n  const prop = secondary === \"TOP\" || secondary === \"BOTTOM\" ? \"top\" : \"left\";\n  const size =\n    secondary === \"TOP\" || secondary === \"BOTTOM\" ? \"height\" : \"width\";\n\n  if (secondary === \"TOP\" || secondary === \"LEFT\") {\n    return {\n      [prop]: minMax(\n        rects.trigger[prop] -\n          rects.relativeParent[prop] +\n          scroll[prop] +\n          offsetSecondary,\n        getLimits(rects, scroll)[prop]\n      )\n    };\n  }\n\n  return {\n    [prop]: minMax(\n      rects.trigger[prop] +\n        rects.trigger[size] -\n        rects.layer[size] -\n        (rects.relativeParent[prop] - scroll[prop]) -\n        offsetSecondary,\n      getLimits(rects, scroll)[prop]\n    )\n  };\n}\n\ntype GetAbsolutePositionsArgs = {\n  anchor: AnchorEnum;\n  rects: Rects;\n  scrollTop: number;\n  scrollLeft: number;\n  triggerOffset: number;\n  offsetSecondary: number;\n};\n\nexport default function getAbsolutePositions({\n  anchor,\n  rects,\n  triggerOffset,\n  offsetSecondary,\n  scrollLeft,\n  scrollTop\n}: GetAbsolutePositionsArgs) {\n  const scroll: Scroll = { left: scrollLeft, top: scrollTop };\n\n  if (anchor === \"CENTER\") {\n    return {\n      top: getCenter(rects, scroll, 0, \"top\", \"height\"),\n      left: getCenter(rects, scroll, 0, \"left\", \"width\")\n    };\n  }\n\n  const { primary, secondary } = splitAnchor(anchor);\n  const primaryDirection = getPrimaryDirection(anchor);\n\n  return {\n    ...getPrimaryStyle(primary, rects, scroll, triggerOffset),\n    ...getSecondaryStyle(\n      secondary,\n      rects,\n      scroll,\n      offsetSecondary,\n      primaryDirection\n    )\n  } as React.CSSProperties;\n}\n","import {\n  Direction,\n  Primary,\n  Side,\n  AnchorEnum,\n  LayerDimensions\n} from \"../types\";\n\nimport {\n  splitAnchor,\n  getPrimaryDirection,\n  getLayerSideByAnchor\n} from \"../anchor\";\n\nimport { clientRectToObject } from \"../util\";\n\n// if user provided `layerDimensions` to the `placement` prop,\n// anticipate the width / height based on the current anchor\nfunction fixLayerDimensions(\n  originalLayer: ClientRect,\n  anchor: AnchorEnum,\n  layerDimensions: LayerDimensions\n): ClientRect {\n  const dimensions =\n    typeof layerDimensions === \"function\"\n      ? layerDimensions(getLayerSideByAnchor(anchor))\n      : layerDimensions;\n\n  return {\n    ...clientRectToObject(originalLayer),\n    ...dimensions\n  };\n}\n\nconst propMap = {\n  TOP: { side1: \"bottom\", side2: \"top\", size: \"height\", factor: -1 },\n  BOTTOM: { side1: \"top\", side2: \"bottom\", size: \"height\", factor: 1 },\n  LEFT: { side1: \"right\", side2: \"left\", size: \"width\", factor: -1 },\n  RIGHT: { side1: \"left\", side2: \"right\", size: \"width\", factor: 1 }\n};\n\nfunction getPrimaryRect(\n  primary: Primary,\n  trigger: ClientRect,\n  layer: ClientRect,\n  triggerOffset: number\n) {\n  const { side1, side2, size, factor } = propMap[primary];\n\n  const value = trigger[side2] + triggerOffset * factor;\n\n  return {\n    [side1]: value,\n    [side2]: value + layer[size] * factor\n  };\n}\n\nfunction getCenter(\n  trigger: ClientRect,\n  layer: ClientRect,\n  offsetSecondary: number,\n  prop: \"top\" | \"left\",\n  size: \"width\" | \"height\"\n) {\n  const value =\n    trigger[prop] + trigger[size] / 2 - layer[size] / 2 - offsetSecondary;\n\n  return {\n    [prop]: value,\n    [prop === \"left\" ? \"right\" : \"bottom\"]: value + layer[size]\n  };\n}\n\nfunction getSecondaryRect(\n  secondary: Side,\n  trigger: ClientRect,\n  layer: ClientRect,\n  offsetSecondary: number,\n  primaryDirection: Direction\n) {\n  if (secondary === \"CENTER\") {\n    const prop = primaryDirection === \"X\" ? \"top\" : \"left\";\n    const size = primaryDirection === \"X\" ? \"height\" : \"width\";\n\n    return getCenter(trigger, layer, offsetSecondary, prop, size);\n  }\n\n  const { side1, side2, size, factor } = propMap[secondary];\n\n  const value = trigger[side2] - offsetSecondary * factor;\n\n  return {\n    [side2]: value,\n    [side1]: value - layer[size] * factor\n  };\n}\n\ntype GetLayerRectArgs = {\n  trigger: ClientRect;\n  layer: ClientRect;\n  anchor: AnchorEnum;\n  triggerOffset: number;\n  scrollOffset?: number;\n  offsetSecondary?: number;\n  layerDimensions: LayerDimensions | null;\n};\n\nexport default function getLayerRectByAnchor({\n  trigger,\n  layer,\n  anchor,\n  triggerOffset,\n  scrollOffset = 0,\n  offsetSecondary = 0,\n  layerDimensions\n}: GetLayerRectArgs): ClientRect {\n  let primaryRect: Partial<ClientRect>;\n  let secondaryRect: Partial<ClientRect>;\n\n  // get the correct anticipated ClientRect based on the provided Anchor\n  const layerRect = layerDimensions\n    ? fixLayerDimensions(layer, anchor, layerDimensions)\n    : layer;\n\n  if (anchor === \"CENTER\") {\n    primaryRect = getCenter(trigger, layerRect, 0, \"top\", \"height\");\n    secondaryRect = getCenter(trigger, layerRect, 0, \"left\", \"width\");\n  } else {\n    const { primary, secondary } = splitAnchor(anchor);\n\n    const primaryDirection = getPrimaryDirection(anchor);\n\n    primaryRect = getPrimaryRect(primary, trigger, layerRect, triggerOffset);\n    secondaryRect = getSecondaryRect(\n      secondary,\n      trigger,\n      layerRect,\n      offsetSecondary,\n      primaryDirection\n    );\n  }\n\n  const result = {\n    ...layerRect,\n    ...primaryRect,\n    ...secondaryRect\n  };\n\n  // correct scrollOffsets\n  result.top = result.top - scrollOffset;\n  result.right = result.right + scrollOffset;\n  result.left = result.left - scrollOffset;\n  result.bottom = result.bottom + scrollOffset;\n\n  return result;\n}\n","import {\n  Rects,\n  AnchorEnum,\n  OffsetSide,\n  LayerDimensions,\n  LayerSide\n} from \"../types\";\nimport getLayerRectByAnchor from \"./getLayerRectByAnchor\";\n\nconst ALL_OFFSET_SIDES: OffsetSide[] = [\"bottom\", \"top\", \"left\", \"right\"];\n\ntype LayerOffsets = Record<OffsetSide, number>;\n\nfunction getLayerOffsetsToParent(\n  layer: ClientRect,\n  parent: ClientRect\n): LayerOffsets {\n  return {\n    top: layer.top - parent.top,\n    bottom: parent.bottom - layer.bottom,\n    left: layer.left - parent.left,\n    right: parent.right - layer.right\n  };\n}\n\nfunction getLayerOffsetsToParents(layer: ClientRect, parents: ClientRect[]) {\n  return parents.map(parent => getLayerOffsetsToParent(layer, parent));\n}\n\nexport function isLayerCompletelyInvisible(\n  layer: ClientRect,\n  parents: ClientRect[]\n) {\n  return parents.some(parent => {\n    return (\n      layer.bottom <= parent.top ||\n      layer.right <= parent.left ||\n      layer.top >= parent.bottom ||\n      layer.left >= parent.right\n    );\n  });\n}\n\nexport function doesEntireLayerFitWithinScrollParents(\n  layer: ClientRect,\n  parents: ClientRect[]\n) {\n  const parentOffsets = getLayerOffsetsToParents(layer, parents);\n\n  return parentOffsets.every(offsets => {\n    return ALL_OFFSET_SIDES.every(side => offsets[side] >= 0);\n  });\n}\n\nexport function reduceOffsets(parentOffsets: LayerOffsets[]): LayerOffsets {\n  const parentOffsetsCombined = parentOffsets.reduce(\n    (result, offsets) => {\n      ALL_OFFSET_SIDES.forEach(side => {\n        result[side] = [...result[side], offsets[side]];\n      });\n      return result;\n    },\n    {\n      top: [] as number[],\n      bottom: [] as number[],\n      left: [] as number[],\n      right: [] as number[]\n    }\n  );\n\n  return ALL_OFFSET_SIDES.reduce(\n    (result, side) => {\n      result[side] = parentOffsetsCombined[side].sort((a, b) => a - b)[0];\n      return result;\n    },\n    {} as LayerOffsets\n  );\n}\n\nexport function getNegativeOffsetSides(parentOffsets: LayerOffsets[]) {\n  const offsets = reduceOffsets(parentOffsets);\n\n  return ALL_OFFSET_SIDES.filter(side => offsets[side] < 0);\n}\n\nfunction getVisibleLayerSurface(layer: ClientRect, parent: ClientRect) {\n  const offsets = getLayerOffsetsToParent(layer, parent);\n\n  const { width, height } = ALL_OFFSET_SIDES.filter(\n    side => offsets[side] < 0\n  ).reduce((rect, side) => {\n    const affectedProperty: \"width\" | \"height\" =\n      side === \"top\" || side === \"bottom\" ? \"height\" : \"width\";\n\n    return {\n      ...rect,\n      [affectedProperty]: rect[affectedProperty] + offsets[side]\n    };\n  }, layer);\n\n  const result = width * height;\n\n  return width < 0 && height < 0 ? -result : result;\n}\n\nexport function getVisibleLayerSurfaceWithinScrollParent(\n  layer: ClientRect,\n  parents: ClientRect[]\n) {\n  const surfaces = parents.map(parent => getVisibleLayerSurface(layer, parent));\n\n  // pick smallest\n  return surfaces.sort((a, b) => a - b)[0];\n}\n\nexport function doesAnchorFitWithinScrollParents(\n  anchor: AnchorEnum,\n  rects: Rects,\n  triggerOffset: number,\n  scrollOffset: number,\n  layerDimensions: LayerDimensions | null\n) {\n  const layerRect = getLayerRectByAnchor({\n    anchor,\n    trigger: rects.trigger,\n    layer: rects.layer,\n    triggerOffset,\n    scrollOffset,\n    layerDimensions\n  });\n\n  return doesEntireLayerFitWithinScrollParents(layerRect, rects.scrollParents);\n}\n\nexport function getLayerOffsetsToScrollParentsByAnchor(\n  anchor: AnchorEnum,\n  rects: Rects,\n  triggerOffset: number,\n  scrollOffset: number\n) {\n  return getLayerOffsetsToParents(\n    getLayerRectByAnchor({\n      anchor,\n      trigger: rects.trigger,\n      layer: rects.layer,\n      triggerOffset,\n      scrollOffset,\n      layerDimensions: null\n    }),\n    rects.scrollParents\n  );\n}\n\nexport function triggerIsBiggerThanLayer(\n  layerSide: LayerSide,\n  layer: ClientRect,\n  trigger: ClientRect\n): boolean {\n  return (\n    ((layerSide === \"top\" || layerSide === \"bottom\") &&\n      trigger.width > layer.width) ||\n    ((layerSide === \"left\" || layerSide === \"right\") &&\n      trigger.height > layer.height)\n  );\n}\n","import { Rects, AnchorEnum, LayerDimensions } from \"../types\";\nimport { getPrimaryDirection } from \"../anchor\";\nimport {\n  doesAnchorFitWithinScrollParents,\n  getVisibleLayerSurfaceWithinScrollParent\n} from \"../rect\";\nimport getLayerRectByAnchor from \"../rect/getLayerRectByAnchor\";\n\nfunction getOffsetSurface(\n  anchor: AnchorEnum,\n  layer: ClientRect,\n  triggerOffset: number,\n  scrollOffset: number\n) {\n  const primaryDirection = getPrimaryDirection(anchor);\n\n  const primarySize =\n    layer[primaryDirection === \"X\" ? \"width\" : \"height\"] -\n    triggerOffset -\n    scrollOffset * 2;\n\n  const secondarySize =\n    layer[primaryDirection === \"X\" ? \"height\" : \"width\"] -\n    triggerOffset -\n    scrollOffset * 2;\n\n  return primarySize * secondarySize;\n}\n\nfunction findAnchorByLayerSurface(\n  rects: Rects,\n  anchorOptions: AnchorEnum[],\n  triggerOffset: number,\n  scrollOffset: number,\n  layerDimensions: LayerDimensions | null\n): AnchorEnum {\n  const result = anchorOptions\n    .map(anchor => {\n      // get layerRect based on all offsets\n      const layerRect = getLayerRectByAnchor({\n        anchor,\n        layer: rects.layer,\n        trigger: rects.trigger,\n        scrollOffset,\n        triggerOffset,\n        layerDimensions\n      });\n\n      // get smallest visible layer surface for current anchor\n      const surface = getVisibleLayerSurfaceWithinScrollParent(\n        layerRect,\n        rects.scrollParents\n      );\n\n      // get surface of the offsets\n      // offsets are important for collision detection, but\n      // eventually we are interested in the 'meat' of the layer\n      const offsetSurface = getOffsetSurface(\n        anchor,\n        layerRect,\n        triggerOffset,\n        scrollOffset\n      );\n\n      return {\n        anchor,\n        square: surface - offsetSurface\n      };\n    })\n    // sort -> biggest surface first\n    .sort((a, b) => b.square - a.square);\n\n  return result[0].anchor;\n}\n\nexport default function findBestSuitableAnchor(\n  rects: Rects,\n  anchorOptions: AnchorEnum[],\n  triggerOffset: number,\n  scrollOffset: number,\n  layerDimensions: LayerDimensions | null\n): AnchorEnum {\n  // STRATEGY A\n  // find first that fits parent\n  const anchor = anchorOptions.find(anchor =>\n    doesAnchorFitWithinScrollParents(\n      anchor,\n      rects,\n      triggerOffset,\n      scrollOffset,\n      layerDimensions\n    )\n  );\n\n  if (anchor) {\n    return anchor;\n  }\n\n  // STRATEGY B\n  // find first with biggest surface\n  return findAnchorByLayerSurface(\n    rects,\n    anchorOptions,\n    triggerOffset,\n    scrollOffset,\n    layerDimensions\n  );\n}\n","import { Rects, AnchorEnum, OffsetSide } from \"../types\";\nimport {\n  getLayerOffsetsToScrollParentsByAnchor,\n  getNegativeOffsetSides,\n  doesAnchorFitWithinScrollParents,\n  reduceOffsets,\n  triggerIsBiggerThanLayer\n} from \"../rect\";\nimport {\n  splitAnchor,\n  getPrimaryDirection,\n  getSecondaryAnchorOptionsByPrimary,\n  getLayerSideByAnchor\n} from \"../anchor\";\n\n// finds out which side of the layer will be affected\nfunction getSecondaryOffsetSide(\n  currentAnchor: AnchorEnum,\n  firstAnchorThatDoesNotFit: AnchorEnum,\n  rects: Rects,\n  triggerOffset: number,\n  scrollOffset: number\n): OffsetSide | undefined {\n  const primaryDirection = getPrimaryDirection(currentAnchor);\n\n  const offsets = getLayerOffsetsToScrollParentsByAnchor(\n    firstAnchorThatDoesNotFit,\n    rects,\n    triggerOffset,\n    scrollOffset\n  );\n\n  const sides = getNegativeOffsetSides(offsets);\n\n  return sides.find(side => {\n    if (primaryDirection === \"X\") {\n      return side === \"top\" || side === \"bottom\";\n    }\n\n    return side === \"left\" || side === \"right\";\n  });\n}\n\nexport default function findSecondaryOffset(\n  anchor: AnchorEnum,\n  anchorOptions: AnchorEnum[],\n  rects: Rects,\n  triggerOffset: number,\n  scrollOffset: number\n) {\n  const { primary } = splitAnchor(anchor);\n\n  /**\n   * A.\n   * Check which other anchors available\n   */\n  const secondaryAnchorOptions = getSecondaryAnchorOptionsByPrimary(\n    primary,\n    anchorOptions\n  );\n\n  /**\n   * B.\n   * Check whether current anchor is the preffered anchor and whether\n   * it fits\n   * If so, skip secondary offset\n   */\n  const currentAnchorHasHighestPriority =\n    secondaryAnchorOptions.indexOf(anchor) === 0;\n  const currentAnchorFits = doesAnchorFitWithinScrollParents(\n    anchor,\n    rects,\n    triggerOffset,\n    scrollOffset,\n    null\n  );\n\n  if (currentAnchorHasHighestPriority && currentAnchorFits) {\n    return 0;\n  }\n\n  /**\n   * C.\n   * Retrieve the first anchor on same primary side (by priority) that\n   * does not fit.\n   * Check if there's a relevant side that has a negative offset.\n   * If not, skip secondary offset\n   */\n  const firstAnchorThatDoesNotFit = secondaryAnchorOptions.find(anchor => {\n    return !doesAnchorFitWithinScrollParents(\n      anchor,\n      rects,\n      triggerOffset,\n      scrollOffset,\n      null\n    );\n  })!;\n\n  const affectedSide = getSecondaryOffsetSide(\n    anchor,\n    firstAnchorThatDoesNotFit,\n    rects,\n    triggerOffset,\n    scrollOffset\n  );\n\n  if (!affectedSide) {\n    return 0;\n  }\n\n  /**\n   * Determine the final secondary offset\n   */\n  const currentOffsets = reduceOffsets(\n    getLayerOffsetsToScrollParentsByAnchor(\n      anchor,\n      rects,\n      triggerOffset,\n      scrollOffset\n    )\n  );\n\n  let secondaryOffset = -currentOffsets[affectedSide];\n\n  const triggerIsBigger = triggerIsBiggerThanLayer(\n    getLayerSideByAnchor(anchor),\n    rects.layer,\n    rects.trigger\n  );\n\n  const isCenter = anchor.includes(\"_CENTER\");\n  const isLeft = anchor.includes(\"_LEFT\");\n  const isTop = anchor.includes(\"_TOP\");\n\n  // when trigger is bigger, make `secondaryOffset` positive\n  // conditionally\n  if (\n    triggerIsBigger &&\n    ((isLeft && affectedSide === \"right\") ||\n      affectedSide === \"left\" ||\n      (isTop && affectedSide === \"bottom\") ||\n      affectedSide === \"top\")\n  ) {\n    secondaryOffset = -secondaryOffset;\n  } else if (\n    // when current anchor is center, make `secondaryOffset` positive\n    // when affectedSide is top or right\n    !triggerIsBigger &&\n    (isCenter && (affectedSide === \"top\" || affectedSide === \"left\"))\n  ) {\n    secondaryOffset = -secondaryOffset;\n  }\n\n  return secondaryOffset;\n}\n","import { LayerSide } from \"../types\";\nimport { triggerIsBiggerThanLayer } from \"../rect\";\nimport { minMax } from \"../util\";\n\nfunction getOffsets(layer: ClientRect, trigger: ClientRect, arrow: ClientRect) {\n  const left = layer.left + layer.width / 2 - trigger.left - arrow.width / 2;\n  const right = layer.right - layer.width / 2 - trigger.right + arrow.width / 2;\n  const top = layer.top + layer.height / 2 - trigger.top - arrow.height / 2;\n  const bottom =\n    layer.bottom - layer.height / 2 - trigger.bottom + arrow.height / 2;\n\n  return {\n    left: left < 0 ? -left : 0,\n    right: right > 0 ? -right : 0,\n    top: top < 0 ? -top : 0,\n    bottom: bottom > 0 ? -bottom : 0\n  };\n}\n\nexport default function getArrowStyle(\n  layer: ClientRect,\n  trigger: ClientRect,\n  layerSide: LayerSide,\n  arrow: ClientRect\n): React.CSSProperties {\n  const triggerIsBigger = triggerIsBiggerThanLayer(layerSide, layer, trigger);\n\n  const limitsDefault = {\n    left: {\n      min: arrow.width / 2,\n      max: layer.width - arrow.width / 2\n    },\n    top: {\n      min: arrow.height / 2,\n      max: layer.height - arrow.height / 2\n    }\n  };\n\n  const offsets = getOffsets(layer, trigger, arrow);\n\n  if (layerSide === \"bottom\") {\n    return {\n      bottom: \"100%\",\n      top: null,\n      left: minMax(\n        triggerIsBigger\n          ? layer.width / 2 + (offsets.left + offsets.right)\n          : trigger.left + trigger.width / 2 - layer.left,\n        limitsDefault.left\n      ),\n      right: null\n    } as any;\n  }\n  if (layerSide === \"right\") {\n    return {\n      right: \"100%\",\n      left: null,\n      top: minMax(\n        triggerIsBigger\n          ? layer.height / 2 + (offsets.top + offsets.bottom)\n          : trigger.top + trigger.height / 2 - layer.top,\n        limitsDefault.top\n      ),\n      bottom: null\n    } as any;\n  }\n  if (layerSide === \"top\") {\n    return {\n      top: \"100%\",\n      bottom: null,\n      left: minMax(\n        triggerIsBigger\n          ? layer.width / 2 + (offsets.left + offsets.right)\n          : trigger.left + trigger.width / 2 - layer.left,\n        limitsDefault.left\n      ),\n      right: null\n    } as any;\n  }\n\n  return {\n    left: \"100%\",\n    right: null,\n    top: minMax(\n      triggerIsBigger\n        ? layer.height / 2 + (offsets.top + offsets.bottom)\n        : trigger.top + trigger.height / 2 - layer.top,\n      limitsDefault.top\n    ),\n    bottom: null\n  } as any;\n}\n","import {\n  Rects,\n  AnchorEnum,\n  PreferedX,\n  PreferedY,\n  LayerDimensions\n} from \"../types\";\n\nimport { getAnchorPriority } from \"../anchor\";\n\nimport getAbsolutePositions from \"./getAbsolutePositions\";\nimport getSuitableAnchor from \"./getSuitableAnchor\";\nimport getSecondaryOffset from \"./getSecondaryOffset\";\nimport getLayerRectByAnchor from \"../rect/getLayerRectByAnchor\";\n\nexport { default as getArrowStyle } from \"./getArrowStyle\";\n\ntype GetAutoAdjustStyleArgs = {\n  rects: Rects;\n  scrollTop: number;\n  scrollLeft: number;\n  triggerOffset: number;\n  scrollOffset: number;\n  preferedAnchor: AnchorEnum;\n  preferedX: PreferedX;\n  preferedY: PreferedY;\n  possibleAnchors: AnchorEnum[];\n  autoAdjust: boolean;\n  snapToAnchor: boolean;\n  layerDimensions: LayerDimensions | null;\n};\n\nexport default function getAbsoluteStyle({\n  rects,\n  scrollTop,\n  scrollLeft,\n  triggerOffset,\n  scrollOffset,\n  possibleAnchors,\n  preferedAnchor,\n  preferedX,\n  preferedY,\n  autoAdjust,\n  snapToAnchor,\n  layerDimensions\n}: GetAutoAdjustStyleArgs): {\n  layerStyle: React.CSSProperties;\n  layerRect: ClientRect;\n  anchor: AnchorEnum;\n} {\n  // get a list of possible anchors bases on user set props\n  const possibleAnchorsByPriority = getAnchorPriority(\n    preferedAnchor,\n    possibleAnchors,\n    preferedX,\n    preferedY,\n    rects\n  );\n\n  // on `autoAdjust` find best suitable anchor based on\n  // window's / scrollParent's position\n  const anchor = autoAdjust\n    ? getSuitableAnchor(\n        rects,\n        possibleAnchorsByPriority,\n        triggerOffset,\n        scrollOffset,\n        layerDimensions\n      )\n    : preferedAnchor;\n\n  // calculate a secondary offset when `autoAdjust` is set\n  // and `snapToAnchor` is not.\n  // Basically it creates a visual effect where it seems that\n  // the layer has glued to it's parents sides\n  // Note: `offsetSecondary` is disabled when anchor is CENTER\n  const offsetSecondary =\n    autoAdjust && !snapToAnchor && anchor !== \"CENTER\"\n      ? getSecondaryOffset(\n          anchor,\n          possibleAnchorsByPriority,\n          rects,\n          triggerOffset,\n          scrollOffset\n        )\n      : 0;\n\n  const layerStyle = getAbsolutePositions({\n    anchor,\n    rects,\n    triggerOffset,\n    offsetSecondary,\n    scrollLeft,\n    scrollTop\n  });\n\n  const layerRect = getLayerRectByAnchor({\n    anchor,\n    trigger: rects.trigger,\n    layer: rects.layer,\n    triggerOffset,\n    offsetSecondary,\n    layerDimensions\n  });\n\n  if (layerDimensions) {\n    layerStyle.width = layerRect.width;\n    layerStyle.height = layerRect.height;\n  }\n\n  return {\n    layerStyle,\n    layerRect,\n    anchor\n  };\n}\n","import { Placement, ResultingStyles, Rects } from \"./types\";\nimport {\n  getWindowClientRect,\n  getContentBox,\n  EMPTY_STYLE,\n  isSet,\n  clientRectToObject\n} from \"./util\";\nimport { POSSIBLE_ANCHORS, getLayerSideByAnchor } from \"./anchor\";\nimport getAbsoluteStyle, { getArrowStyle } from \"./style\";\n\nfunction compensateScrollbars(\n  rect: ClientRect,\n  clientWidth: number,\n  clientHeight: number\n) {\n  const scrollbarWidth = rect.width - clientWidth;\n  const scrollbarHeight = rect.height - clientHeight;\n\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width - scrollbarWidth,\n    right: rect.right - scrollbarWidth,\n    height: rect.height - scrollbarHeight,\n    bottom: rect.bottom - scrollbarHeight\n  };\n}\n\nfunction getArrowRect(\n  layerElement: HTMLElement,\n  arrowOffset: number\n): ClientRect {\n  const arrowElement = layerElement.querySelector(\"[data-arrow]\");\n  if (!arrowElement) {\n    return { top: 0, bottom: 0, left: 0, right: 0, width: 0, height: 0 };\n  }\n\n  const rect = arrowElement.getBoundingClientRect();\n\n  return {\n    ...clientRectToObject(rect),\n    width: rect.width + arrowOffset * 2,\n    height: rect.height + arrowOffset * 2\n  };\n}\n\nexport const defaultPlacement: Required<Placement> = {\n  autoAdjust: false,\n  snapToAnchor: false,\n  anchor: \"TOP_CENTER\",\n  layerDimensions: null,\n  possibleAnchors: POSSIBLE_ANCHORS,\n  preferX: \"RIGHT\",\n  preferY: \"BOTTOM\",\n  scrollOffset: 10,\n  triggerOffset: 0,\n  arrowOffset: 0\n};\n\ntype CalculateStyleProps = {\n  triggerRect: ClientRect;\n  layerElement: HTMLElement | null;\n  relativeParentElement: HTMLElement | null;\n  scrollParents: HTMLElement[];\n  placement: Placement;\n  fixed: boolean | undefined;\n  environment?: Window;\n};\n\nexport default function getPositioning({\n  triggerRect,\n  layerElement,\n  relativeParentElement,\n  scrollParents,\n  placement = {},\n  environment,\n  fixed\n}: CalculateStyleProps) {\n  /**\n   * A.\n   * Calculate new layer positions\n   */\n\n  // sometimes ResizeObserver calls this function when all values in the\n  // trigger ClientRect are 0. Return early in that case\n  if (triggerRect.height === 0) {\n    return;\n  }\n\n  if (!layerElement) {\n    return;\n  }\n\n  // gather all scroll parents (including the window ClientRect)\n  // in order to check for collisions\n  const scrollParentRects = fixed\n    ? [getWindowClientRect(environment)]\n    : [\n        ...scrollParents.map(parent =>\n          compensateScrollbars(\n            parent.getBoundingClientRect(),\n            parent.clientWidth,\n            parent.clientHeight\n          )\n        ),\n        getWindowClientRect(environment)\n      ];\n\n  const options = {\n    autoAdjust: placement.autoAdjust || defaultPlacement.autoAdjust,\n    snapToAnchor: placement.snapToAnchor || defaultPlacement.snapToAnchor,\n    triggerOffset: (isSet(placement.triggerOffset)\n      ? placement.triggerOffset\n      : defaultPlacement.triggerOffset) as number,\n    scrollOffset: (isSet(placement.scrollOffset)\n      ? placement.scrollOffset\n      : defaultPlacement.scrollOffset) as number,\n    possibleAnchors:\n      placement.possibleAnchors || defaultPlacement.possibleAnchors,\n    preferedAnchor: placement.anchor || defaultPlacement.anchor,\n    preferedX: placement.preferX || defaultPlacement.preferX,\n    preferedY: placement.preferY || defaultPlacement.preferY,\n    scrollLeft:\n      relativeParentElement === document.body\n        ? 0\n        : relativeParentElement!.scrollLeft,\n    scrollTop:\n      relativeParentElement === document.body\n        ? 0\n        : relativeParentElement!.scrollTop,\n    relativeParentElement,\n    layerDimensions:\n      placement.layerDimensions || defaultPlacement.layerDimensions\n  };\n\n  const layerBox = layerElement.getBoundingClientRect();\n\n  // construct layerRect\n  const layer = {\n    top: layerBox.top,\n    left: layerBox.left,\n    right: layerBox.right,\n    bottom: layerBox.bottom,\n\n    // use `window.getComputedProperty` for width / height in order\n    // to handle things like scale-transforms\n    ...getContentBox(layerElement!, environment)\n  };\n\n  const rects: Rects = {\n    layer,\n    relativeParent: relativeParentElement!.getBoundingClientRect(),\n    scrollParents: scrollParentRects,\n    trigger: triggerRect,\n    arrow: getArrowRect(\n      layerElement,\n      placement.arrowOffset || defaultPlacement.arrowOffset\n    )\n  };\n\n  const { layerRect, layerStyle, anchor } = getAbsoluteStyle({\n    rects,\n    ...options\n  });\n\n  if (fixed) {\n    layerStyle.top = layerRect.top;\n    layerStyle.left = layerRect.left;\n  }\n\n  // determine in which side to layer will be relative to\n  // the trigger\n  const layerSide = getLayerSideByAnchor(anchor);\n\n  // get optional arrow positions\n  // anchor-style is pointless when rendered anchor is CENTER\n  const arrowStyle =\n    anchor === \"CENTER\"\n      ? EMPTY_STYLE\n      : getArrowStyle(layerRect, triggerRect, layerSide, rects.arrow);\n\n  const styles: ResultingStyles = {\n    layer: layerStyle,\n    arrow: arrowStyle,\n    layerSide\n  };\n\n  return {\n    styles,\n    layerRect\n  };\n}\n","import * as React from \"react\";\n\n/**\n * Tracks an element and keeps it in state\n * (together with other relevant state that depends on the element)\n */\nfunction useElementRef<T = HTMLElement | null>(\n  initialState?: T,\n  elementToState?: (element: HTMLElement) => T\n) {\n  const [state, setState] = React.useState<T | null>(initialState || null);\n\n  const lastElement = React.useRef<HTMLElement | null>(null);\n\n  const setRef = React.useCallback(node => {\n    if (node && node !== lastElement.current) {\n      lastElement.current = node;\n      if (elementToState) {\n        setState(elementToState(node));\n      } else {\n        setState(node);\n      }\n    }\n  }, []);\n\n  return [setRef, state, lastElement] as [\n    any,\n    T,\n    React.MutableRefObject<HTMLElement | null>\n  ];\n}\n\nexport default useElementRef;\n","export default function findScrollContainers(\n  element: HTMLElement | null,\n  environment?: Window\n): HTMLElement[] {\n  const result: HTMLElement[] = [];\n\n  if (!element || !environment) {\n    return result;\n  }\n\n  if (element === document.body) {\n    return result;\n  }\n\n  const { overflow, overflowX, overflowY } = environment.getComputedStyle(\n    element\n  );\n\n  if (\n    [overflow, overflowX, overflowY].some(\n      prop => prop === \"auto\" || prop === \"scroll\"\n    )\n  ) {\n    result.push(element);\n  }\n\n  return [\n    ...result,\n    ...findScrollContainers(element.parentElement, environment)\n  ];\n}\n","import { Container } from \"./types\";\nimport useElementRef from \"./useElementRef\";\nimport * as React from \"react\";\nimport findScrollContainers from \"./findScrollContainers\";\n\ntype UseElementState = {\n  triggerElement: HTMLElement | null;\n  relativeParentElement: HTMLElement | null;\n  scrollParents: HTMLElement[];\n};\n\nexport default function useElementState(\n  container: Container | undefined,\n  fixed: boolean | undefined,\n  environment?: Window\n) {\n  return useElementRef<UseElementState>(\n    { triggerElement: null, relativeParentElement: null, scrollParents: [] },\n    React.useCallback((triggerElement: HTMLElement) => {\n      const scrollParents = findScrollContainers(triggerElement, environment);\n\n      const relativeParentElement = scrollParents[0] || document.body;\n\n      if (relativeParentElement === document.body) {\n        document.body.style.position = \"relative\";\n      } else if (process.env.NODE_ENV === \"development\" && environment) {\n        // Check if we should warn the user about 'position: relative; stuff...'\n        const containerElement =\n          typeof container === \"function\" ? container() : container;\n\n        const position = environment.getComputedStyle(relativeParentElement)\n          .position;\n        const shouldWarnAboutPositionStyle =\n          position !== \"relative\" &&\n          position !== \"absolute\" &&\n          position !== \"fixed\" &&\n          !fixed &&\n          !containerElement;\n\n        if (shouldWarnAboutPositionStyle) {\n          console.error(\n            `react-laag: Set the 'position' style of the nearest scroll-container to 'relative', 'absolute' or 'fixed', or set the 'fixed' prop to true. This is needed in order to position the layers properly. Currently the scroll-container is positioned: \"${position}\". Visit https://react-laag.com/docs/#position-relative for more info.`,\n            relativeParentElement\n          );\n        }\n      }\n\n      return {\n        triggerElement,\n        relativeParentElement,\n        scrollParents\n      };\n    }, [])\n  );\n}\n","import * as React from \"react\";\nimport { isSet } from \"./util\";\n\nexport default function useIsOpen(\n  internal: boolean,\n  external: boolean | undefined\n) {\n  const shouldOpenAfterMount = React.useRef<boolean>(external!);\n\n  const isOpen = shouldOpenAfterMount.current\n    ? false\n    : isSet(external)\n    ? external!\n    : internal;\n\n  const rerenderAfterMount = React.useState(false)[1];\n\n  React.useEffect(() => {\n    if (shouldOpenAfterMount.current) {\n      shouldOpenAfterMount.current = false;\n      rerenderAfterMount(true);\n    }\n  }, []);\n\n  return isOpen;\n}\n","import * as React from \"react\";\nimport {\n  LayerSide,\n  RenderLayer,\n  ToggleLayerOptions,\n  DisappearType\n} from \"./types\";\n\nimport useOutsideClick, { OutsideClickGroupProvider } from \"./useOutsideClick\";\nimport useOnScroll from \"./useOnScroll\";\nimport useOnWindowResize from \"./useOnWindowResize\";\nimport useTrackElementResize from \"./useTrackElementResize\";\nimport useIsomorphicLayoutEffect from \"./useIsomorphicLayoutEffect\";\nimport useStyleState from \"./useStyleState\";\nimport getPositioning, { defaultPlacement } from \"./getPositioning\";\nimport useElementState from \"./useElementState\";\nimport useIsOpen from \"./useIsOpen\";\n\nimport {\n  EMPTY_STYLE,\n  isSet,\n  shouldUpdateStyles,\n  getWindowClientRect\n} from \"./util\";\n\nimport {\n  doesEntireLayerFitWithinScrollParents,\n  isLayerCompletelyInvisible\n} from \"./rect\";\nimport { createPortal } from \"react-dom\";\n\ntype RenderChildrenProps = {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n  triggerRef: React.RefObject<any>;\n  layerSide: LayerSide | null;\n};\n\nexport type Props = {\n  children: (childrenProps: RenderChildrenProps) => React.ReactNode;\n  renderLayer: RenderLayer;\n  isOpen?: boolean;\n  onOutsideClick?: () => void;\n  onDisappear?: (type: DisappearType) => void;\n} & ToggleLayerOptions;\n\nfunction ToggleLayer({\n  children,\n  renderLayer,\n  placement = {},\n  onStyle,\n  isOpen: isOpenExternal,\n  closeOnOutsideClick,\n  onOutsideClick,\n  onDisappear,\n  closeOnDisappear,\n  fixed,\n  container,\n  environment = typeof window !== \"undefined\" ? window : undefined,\n  ...props\n}: Props) {\n  /**\n   * Tracks trigger element and keeps it in state together with it's\n   * relative/absolute positioned parent\n   */\n  const [\n    triggerRef,\n    { relativeParentElement, triggerElement, scrollParents },\n    normalTriggerRef\n  ] = useElementState(container, fixed, environment!);\n\n  const { styles, setStyles, lastStyles, resetLastStyles } = useStyleState(\n    placement.anchor || defaultPlacement.anchor\n  );\n\n  const layerRef = React.useRef<HTMLElement | null>(null);\n\n  const [isOpenInternal, setOpenInternal] = React.useState(false);\n\n  const isOpen = useIsOpen(isOpenInternal, isOpenExternal);\n\n  const handlePositioning = React.useCallback(() => {\n    if (!triggerElement) {\n      throw new Error(\n        \"Could not find a valid reference of the trigger element. See https://www.react-laag.com/docs/togglelayer/#children for more info.\"\n      );\n    }\n    const triggerRect = triggerElement.getBoundingClientRect();\n\n    const result = getPositioning({\n      triggerRect,\n      layerElement: layerRef.current,\n      placement,\n      relativeParentElement,\n      scrollParents,\n      fixed,\n      environment\n    });\n\n    if (!result) {\n      return;\n    }\n\n    const { layerRect, styles } = result;\n\n    // only update styles when necessary\n    if (shouldUpdateStyles(lastStyles.current, styles)) {\n      // is parent in control of styles? (onStyle)\n      if (isSet(onStyle)) {\n        lastStyles.current = styles;\n        onStyle!(styles.layer, styles.arrow, styles.layerSide);\n      }\n      // ... otherwise set styles internally\n      else {\n        setStyles(styles);\n      }\n    }\n\n    /**\n     * B.\n     * Manage disappearance\n     */\n\n    const hasOnDisappear = isSet(onDisappear);\n    const shouldCloseOnDisappear = closeOnDisappear && !isSet(isOpenExternal);\n\n    // Should we respond to the layer's partial or full disappearance?\n    // (trigger's disappearance when `fixed` props is set)\n    if (hasOnDisappear || shouldCloseOnDisappear) {\n      const allScrollParents = [\n        ...scrollParents.map(parent => parent.getBoundingClientRect()),\n        getWindowClientRect(environment)\n      ];\n\n      const partial = !doesEntireLayerFitWithinScrollParents(\n        fixed ? triggerRect : layerRect,\n        allScrollParents\n      );\n\n      const full = isLayerCompletelyInvisible(\n        fixed ? triggerRect : layerRect,\n        allScrollParents\n      );\n\n      // if parent is interested in diseappearance...\n      if (hasOnDisappear) {\n        if (partial || full) {\n          onDisappear!(full ? \"full\" : \"partial\");\n        }\n      }\n      // ... else close accordingly\n      else {\n        if (closeOnDisappear === \"partial\" && partial) {\n          setOpenInternal(false);\n        }\n        if (closeOnDisappear === \"full\" && full) {\n          setOpenInternal(false);\n        }\n      }\n    }\n  }, [\n    relativeParentElement,\n    isOpen,\n    triggerElement,\n    scrollParents,\n    fixed,\n    placement\n  ]);\n\n  // call `handlePositioning` when the layer's / trigger's\n  // height and / or width changes\n  const resizeObserver = useTrackElementResize(\n    props.ResizeObserver,\n    layerRef,\n    triggerElement,\n    isOpen,\n    handlePositioning,\n    environment\n  );\n\n  // On every render, check a few things...\n  useIsomorphicLayoutEffect(() => {\n    /**\n     * A.\n     * Ignore when render is caused by internal style change\n     */\n    const styleIsSetInterally = !isSet(onStyle);\n    const effectBecauseOfInternalStyleChange = styles !== lastStyles.current;\n\n    if (effectBecauseOfInternalStyleChange && styleIsSetInterally) {\n      lastStyles.current = styles;\n      return;\n    }\n\n    // reset lastStyles-ref when closed\n    if (!isOpen) {\n      resetLastStyles();\n      return;\n    }\n\n    /**\n     * B.\n     * Prepare to calculate new layer style\n     */\n\n    // if (!triggerElement) {\n    //   throw new Error(\"Please provide a valid ref to the trigger element\");\n    // } else if (!layerRef.current) {\n    //   throw new Error(\"Please provide a valid ref to the layer element\");\n    // }\n\n    handlePositioning();\n  });\n\n  // calculate new layer style when window size changes\n  useOnWindowResize(handlePositioning, environment, isOpen);\n\n  // calculate new layer style when user scrolls\n  useOnScroll(scrollParents, handlePositioning, environment, isOpen);\n\n  const outsideClickRefs = React.useRef(\n    new Set<React.RefObject<HTMLElement | null | undefined>>([\n      layerRef,\n      normalTriggerRef\n    ])\n  );\n\n  // handle clicks that are not originated from the trigger / layer\n  // element\n  useOutsideClick(\n    outsideClickRefs,\n    React.useCallback(() => {\n      if (!isOpen) {\n        return;\n      }\n\n      if (onOutsideClick) {\n        onOutsideClick();\n      }\n\n      if (closeOnOutsideClick && !isSet(isOpenExternal)) {\n        setOpenInternal(false);\n      }\n    }, [isOpen, setOpenInternal, isOpenExternal])\n  );\n\n  const containerElement =\n    typeof container === \"function\" ? container() : container;\n\n  return (\n    <>\n      {children({\n        isOpen,\n        close: () => {\n          /* istanbul ignore next */\n          if (isSet(isOpenExternal)) {\n            throw new Error(\n              \"You cannot call `close()` while using the `isOpen` prop\"\n            );\n          }\n          /* istanbul ignore next */\n          setOpenInternal(false);\n        },\n        open: () => {\n          /* istanbul ignore next */\n          if (isSet(isOpenExternal)) {\n            throw new Error(\n              \"You cannot call `open()` while using the `isOpen` prop\"\n            );\n          }\n          /* istanbul ignore next */\n          setOpenInternal(true);\n        },\n        toggle: () => {\n          /* istanbul ignore next */\n          if (isSet(isOpenExternal)) {\n            throw new Error(\n              \"You cannot call `toggle()` while using the `isOpen` prop\"\n            );\n          }\n          setOpenInternal(!isOpenInternal);\n        },\n        triggerRef,\n        layerSide: isOpen ? styles.layerSide : null\n      })}\n\n      {relativeParentElement && (\n        <OutsideClickGroupProvider refs={outsideClickRefs}>\n          {createPortal(\n            renderLayer({\n              layerProps: {\n                ref: element => {\n                  if (element) {\n                    // observe the layer for resizing\n                    // it's ok to observe the same element multiple times\n                    // since multiple observes of same element are ignored\n                    resizeObserver.observe(element!);\n                  }\n\n                  layerRef.current = element;\n                },\n                style: {\n                  ...(isSet(onStyle) ? EMPTY_STYLE : styles.layer),\n                  position: fixed ? \"fixed\" : \"absolute\",\n                  willChange: \"top, bottom, left, right, width, height\"\n                }\n              },\n              arrowStyle: {\n                ...(isSet(onStyle) ? EMPTY_STYLE : styles.arrow),\n                position: \"absolute\",\n                willChange: \"top, bottom, left, right\"\n              },\n              isOpen,\n              layerSide: styles.layerSide,\n              triggerRect: triggerElement\n                ? triggerElement.getBoundingClientRect()\n                : null,\n              close: () => {\n                /* istanbul ignore next */\n                if (isSet(isOpenExternal)) {\n                  throw new Error(\n                    \"You cannot call `close()` while using the `isOpen` prop\"\n                  );\n                }\n                /* istanbul ignore next */\n                setOpenInternal(false);\n              }\n            }),\n            containerElement || relativeParentElement\n          )}\n        </OutsideClickGroupProvider>\n      )}\n    </>\n  );\n}\n\nexport default ToggleLayer;\n","import * as React from \"react\";\nimport { LayerSide } from \"./types\";\n\nfunction getWidthBasedOnAngle(angle: number, size: number) {\n  return Math.tan(angle * (Math.PI / 180)) * size;\n}\n\nfunction getViewBox(\n  sizeA: number,\n  sizeB: number,\n  layerSide: LayerSide,\n  borderWidth: number\n) {\n  switch (layerSide) {\n    case \"bottom\":\n      return `0 ${-borderWidth} ${sizeB} ${sizeA}`;\n    case \"top\":\n      return `0 0 ${sizeB} ${sizeA + borderWidth}`;\n    case \"right\":\n      return `${-borderWidth} 0 ${sizeA} ${sizeB}`;\n    case \"left\":\n      return `0 0 ${sizeA + borderWidth} ${sizeB}`;\n  }\n\n  return \"\";\n}\n\ntype getTrianglePathProps = {\n  sizeA: number;\n  sizeB: number;\n  layerSide: LayerSide;\n  roundness: number;\n  angle: number;\n};\n\nfunction getTrianglePath({\n  sizeA,\n  sizeB,\n  layerSide,\n  roundness,\n  angle\n}: getTrianglePathProps) {\n  const relativeRoundness = (roundness / 10) * sizeA * 2;\n\n  const A =\n    layerSide === \"bottom\"\n      ? `0 ${sizeA}`\n      : layerSide === \"top\"\n      ? `0 0`\n      : layerSide === \"right\"\n      ? `${sizeA} ${sizeB}`\n      : `0 ${sizeB}`;\n\n  const B = `${layerSide === \"bottom\" || layerSide === \"top\" ? \"H\" : \"V\"} ${\n    layerSide === \"bottom\" || layerSide === \"top\" ? sizeB : 0\n  }`;\n\n  const cPoint = sizeB / 2;\n  const c1A = sizeB / 2 + getWidthBasedOnAngle(angle, sizeA / 8);\n  const c1B = sizeA / 8;\n\n  const C =\n    layerSide === \"bottom\"\n      ? `C ${c1A} ${c1B} ${cPoint + relativeRoundness} 0 ${cPoint} 0`\n      : layerSide === \"top\"\n      ? `C ${c1A} ${sizeA - c1B} ${cPoint +\n          relativeRoundness} ${sizeA} ${cPoint} ${sizeA}`\n      : layerSide === \"right\"\n      ? `C ${c1B} ${sizeB - c1A} 0 ${cPoint - relativeRoundness} 0 ${cPoint}`\n      : `C ${sizeA - c1B} ${sizeB - c1A} ${sizeA} ${cPoint -\n          relativeRoundness} ${sizeA} ${cPoint}`;\n\n  const d1A = sizeB / 2 - getWidthBasedOnAngle(angle, sizeA / 8);\n  const d1B = sizeA / 8;\n\n  const D =\n    layerSide === \"bottom\"\n      ? `C ${cPoint - relativeRoundness} 0 ${d1A} ${d1B} ${A}`\n      : layerSide === \"top\"\n      ? `C ${cPoint - relativeRoundness} ${sizeA} ${d1A} ${sizeA - d1B} ${A}`\n      : layerSide === \"right\"\n      ? `C 0 ${cPoint + relativeRoundness} ${d1B} ${sizeB - d1A} ${A}`\n      : `C${sizeA} ${cPoint + relativeRoundness} ${sizeA - d1B} ${sizeB -\n          d1A} ${A}`;\n\n  return `M ${A} ${B} ${C} ${D}`;\n}\n\ntype GetBorderMaskPathProps = {\n  sizeA: number;\n  sizeB: number;\n  borderWidth: number;\n  layerSide: LayerSide;\n  angle: number;\n};\n\nfunction getBorderMaskPath({\n  sizeA,\n  sizeB,\n  borderWidth,\n  layerSide,\n  angle\n}: GetBorderMaskPathProps) {\n  const borderOffset = getWidthBasedOnAngle(angle, borderWidth);\n\n  if (layerSide === \"bottom\" || layerSide === \"top\") {\n    return `M ${borderWidth} ${layerSide === \"bottom\" ? sizeA : 0} H ${sizeB -\n      borderWidth} L ${sizeB - borderWidth - borderOffset} ${\n      layerSide === \"bottom\" ? sizeA - borderWidth : borderWidth\n    } H ${borderOffset + borderWidth} Z`;\n  }\n\n  return `M ${layerSide === \"right\" ? sizeA : 0} ${borderWidth} V ${sizeB -\n    borderWidth} L ${\n    layerSide === \"right\" ? sizeA - borderWidth : borderWidth\n  } ${sizeB - borderWidth - borderOffset} V ${borderOffset + borderWidth} Z`;\n}\n\ntype ArrowProps = {\n  angle?: number; // angle of triangle -> range(10, 80) | default 45\n  size?: number; // distance in pixels between point of triangle and layer | default 8\n  roundness?: number; // roundness of the point of the arrow -> range(0, 1) | default 0\n  borderWidth?: number; // default 0\n  borderColor?: string; // default \"black\"\n  backgroundColor?: string; // default \"white\"\n  layerSide?: LayerSide;\n  style?: React.CSSProperties;\n};\n\nexport default function Arrow({\n  size = 8,\n  angle = 45,\n  borderWidth = 0,\n  borderColor = \"black\",\n  roundness = 0,\n  backgroundColor = \"white\",\n  layerSide = \"top\",\n  style = {}\n}: ArrowProps) {\n  if (layerSide === \"center\") {\n    return null;\n  }\n\n  const sizeA = size;\n  const sizeB = getWidthBasedOnAngle(angle, size) * 2;\n\n  return (\n    <svg\n      style={{\n        ...style,\n        transform: `translate${\n          layerSide === \"left\" || layerSide === \"right\" ? \"Y\" : \"X\"\n        }(-50%)`\n      }}\n      data-arrow=\"true\"\n      width={layerSide === \"left\" || layerSide === \"right\" ? sizeA : sizeB}\n      viewBox={getViewBox(sizeA, sizeB, layerSide, borderWidth)}\n    >\n      <path\n        fill={backgroundColor}\n        strokeWidth={borderWidth}\n        stroke={borderColor}\n        d={getTrianglePath({\n          angle,\n          layerSide,\n          roundness,\n          sizeA,\n          sizeB\n        })}\n      />\n      <path\n        fill={backgroundColor}\n        d={getBorderMaskPath({ sizeA, sizeB, angle, borderWidth, layerSide })}\n      />\n    </svg>\n  );\n}\n","import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { RenderLayer, ToggleLayerOptions, LayerSide } from \"./types\";\nimport {\n  isSet,\n  shouldUpdateStyles,\n  getWindowClientRect,\n  EMPTY_STYLE,\n  getElementFromAnchorNode\n} from \"./util\";\nimport {\n  doesEntireLayerFitWithinScrollParents,\n  isLayerCompletelyInvisible\n} from \"./rect\";\nimport getPositioning, { defaultPlacement } from \"./getPositioning\";\n\nimport useElementState from \"./useElementState\";\nimport useStyleState from \"./useStyleState\";\nimport useTrackElementResize from \"./useTrackElementResize\";\nimport useIsomorphicLayoutEffect from \"./useIsomorphicLayoutEffect\";\nimport useOnWindowResize from \"./useOnWindowResize\";\nimport useOnScroll from \"./useOnScroll\";\nimport useOutsideClick, { OutsideClickGroupProvider } from \"./useOutsideClick\";\n\ntype OpenProps = {\n  clientRect: ClientRect | (() => ClientRect);\n  target: HTMLElement;\n};\n\ntype UseToggleLayerPayload = {\n  open: (props: OpenProps) => void;\n  openFromContextMenuEvent: (event: React.MouseEvent<any, MouseEvent>) => void;\n  openFromMouseEvent: (event: React.MouseEvent<any, MouseEvent>) => void;\n  openFromSelection: (selection: Selection) => void;\n  openFromRef: (ref: React.MutableRefObject<any>) => void;\n  close: () => void;\n  isOpen: boolean;\n  layerSide: LayerSide | null;\n};\n\nexport default function useToggleLayer(\n  renderLayer: RenderLayer,\n  {\n    onStyle,\n    closeOnOutsideClick,\n    closeOnDisappear,\n    fixed,\n    container,\n    placement = {},\n    environment = typeof window !== \"undefined\" ? window : undefined,\n    ...props\n  }: ToggleLayerOptions = {}\n) {\n  /**\n   * Tracks trigger element and keeps it in state together with it's\n   * relative/absolute positioned parent\n   */\n  const [\n    setTargetRef,\n    { relativeParentElement, triggerElement: targetElement, scrollParents },\n    normalTriggerRef\n  ] = useElementState(container, fixed, environment);\n\n  const { styles, setStyles, lastStyles, resetLastStyles } = useStyleState(\n    placement.anchor || defaultPlacement.anchor\n  );\n\n  const layerRef = React.useRef<HTMLElement | null>(null);\n  const triggerRectRef = React.useRef<ClientRect | (() => ClientRect) | null>(\n    null\n  );\n\n  function getTriggerRect() {\n    return typeof triggerRectRef.current! === \"function\"\n      ? triggerRectRef.current()\n      : triggerRectRef.current!;\n  }\n\n  const [isOpen, setOpen] = React.useState(false);\n\n  function close() {\n    triggerRectRef.current = null;\n    setOpen(false);\n  }\n\n  const handlePositioning = React.useCallback(() => {\n    const triggerRect = getTriggerRect();\n\n    if (!triggerRect) {\n      return;\n    }\n\n    const result = getPositioning({\n      triggerRect,\n      layerElement: layerRef.current,\n      placement,\n      relativeParentElement,\n      scrollParents,\n      fixed,\n      environment\n    });\n\n    if (!result) {\n      return;\n    }\n\n    const { layerRect, styles } = result;\n\n    // only update styles when necessary\n    if (shouldUpdateStyles(lastStyles.current, styles)) {\n      // is parent in control of styles? (onStyle)\n      if (isSet(onStyle)) {\n        lastStyles.current = styles;\n        onStyle!(styles.layer, styles.arrow, styles.layerSide);\n      }\n      // ... otherwise set styles internally\n      else {\n        setStyles(styles);\n      }\n    }\n\n    /**\n     * B.\n     * Manage disappearance\n     */\n\n    // Should we respond to the layer's partial or full disappearance?\n    // (trigger's disappearance when `fixed` props is set)\n    if (closeOnDisappear) {\n      const allScrollParents = [\n        ...scrollParents.map(parent => parent.getBoundingClientRect()),\n        getWindowClientRect(environment)\n      ];\n\n      const partial = !doesEntireLayerFitWithinScrollParents(\n        fixed ? triggerRect : layerRect,\n        allScrollParents\n      );\n      const full = isLayerCompletelyInvisible(\n        fixed ? triggerRect : layerRect,\n        allScrollParents\n      );\n\n      if (closeOnDisappear === \"partial\" && partial) {\n        close();\n      }\n      if (closeOnDisappear === \"full\" && full) {\n        close();\n      }\n    }\n  }, [\n    relativeParentElement,\n    isOpen,\n    targetElement,\n    scrollParents,\n    fixed,\n    placement\n  ]);\n\n  // call `handlePositioning` when the layer's / targets's\n  // height and / or width changes\n  const resizeObserver = useTrackElementResize(\n    props.ResizeObserver,\n    layerRef,\n    targetElement,\n    isOpen,\n    handlePositioning,\n    environment\n  );\n\n  // On every render, check a few things...\n  useIsomorphicLayoutEffect(() => {\n    /**\n     * A.\n     * Ignore when render is caused by internal style change\n     */\n    const styleIsSetInterally = !isSet(onStyle);\n    const effectBecauseOfInternalStyleChange = styles !== lastStyles.current;\n\n    if (effectBecauseOfInternalStyleChange && styleIsSetInterally) {\n      lastStyles.current = styles;\n      return;\n    }\n\n    // reset `lastStyles` when closed\n    if (!isOpen) {\n      resetLastStyles();\n      return;\n    }\n\n    /**\n     * B.\n     * Prepare to calculate new layer style\n     */\n\n    handlePositioning();\n  });\n\n  // calculate new layer style when window size changes\n  useOnWindowResize(handlePositioning, environment, isOpen);\n\n  // calculate new layer style when user scrolls\n  useOnScroll(scrollParents, handlePositioning, environment, isOpen);\n\n  const outsideClickRefs = React.useRef(\n    new Set<React.RefObject<HTMLElement | null | undefined>>([\n      layerRef,\n      normalTriggerRef\n    ])\n  );\n\n  // handle clicks that are not originated from the trigger / layer\n  // element\n  useOutsideClick(\n    outsideClickRefs,\n    React.useCallback(() => {\n      if (!isOpen) {\n        return;\n      }\n\n      if (closeOnOutsideClick) {\n        close();\n      }\n    }, [isOpen, setOpen, closeOnOutsideClick])\n  );\n\n  const containerElement =\n    typeof container === \"function\" ? container() : container;\n\n  function open({ clientRect, target }: OpenProps) {\n    triggerRectRef.current = clientRect;\n\n    if (isOpen && target === targetElement) {\n      handlePositioning();\n    } else {\n      setTargetRef(target);\n      setOpen(true);\n    }\n  }\n\n  const payload: UseToggleLayerPayload = {\n    isOpen,\n    close,\n    open,\n    openFromContextMenuEvent: evt => {\n      evt.preventDefault();\n      const target = evt.target as HTMLElement;\n\n      const clientRect: ClientRect = {\n        top: evt.clientY,\n        left: evt.clientX,\n        bottom: evt.clientY + 1,\n        right: evt.clientX + 1,\n        width: 1,\n        height: 1\n      };\n\n      open({ clientRect, target });\n    },\n    openFromMouseEvent: evt => {\n      const currentTarget = evt.currentTarget as HTMLElement;\n\n      if (!currentTarget || !currentTarget.getBoundingClientRect) {\n        return;\n      }\n\n      const clientRect = () => currentTarget.getBoundingClientRect();\n\n      open({ clientRect, target: currentTarget });\n    },\n\n    openFromRef: (ref: React.MutableRefObject<any>) => {\n      if (!ref.current) {\n        console.error(\n          `Error inside useTooltip(): Expected a valid ref to a trigger element, but got ${typeof ref.current}`\n        );\n        return;\n      }\n      open({\n        target: ref.current,\n        clientRect: ref.current!.getBoundingClientRect()\n      });\n    },\n\n    openFromSelection: selection => {\n      if (!selection.anchorNode || selection.isCollapsed) {\n        return;\n      }\n\n      const element = getElementFromAnchorNode(selection.anchorNode);\n\n      if (!element) {\n        return;\n      }\n\n      const range = selection.getRangeAt(0);\n\n      open({\n        clientRect: () => range.getBoundingClientRect(),\n        target: element\n      });\n    },\n\n    layerSide: isOpen ? styles.layerSide : null\n  };\n\n  const element =\n    relativeParentElement &&\n    createPortal(\n      renderLayer({\n        layerProps: {\n          ref: element => {\n            if (element) {\n              // observe the layer for resizing\n              // it's ok to observe the same element multiple times\n              // since multiple observes of same element are ignored\n              resizeObserver.observe(element!);\n            }\n\n            layerRef.current = element;\n          },\n          style: {\n            ...(isSet(onStyle) ? EMPTY_STYLE : styles.layer),\n            position: fixed ? \"fixed\" : \"absolute\",\n            willChange: \"top, bottom, left, right, width, height\"\n          }\n        },\n        arrowStyle: {\n          ...(isSet(onStyle) ? EMPTY_STYLE : styles.arrow),\n          position: \"absolute\",\n          willChange: \"top, bottom, left, right\"\n        },\n        isOpen,\n        layerSide: styles.layerSide,\n        triggerRect: getTriggerRect(),\n        close: () => {\n          close();\n        }\n      }),\n      containerElement || relativeParentElement\n    );\n\n  return [\n    <OutsideClickGroupProvider refs={outsideClickRefs}>\n      {element}\n    </OutsideClickGroupProvider>,\n    payload\n  ] as [React.ReactElement<any>, UseToggleLayerPayload];\n}\n","import * as React from \"react\";\n\nexport interface Config {\n  delayEnter?: number;\n  delayLeave?: number;\n  hideOnScroll?: boolean;\n}\n\ninterface CallbackConfig extends Config {\n  onShow: () => void;\n  onHide?: () => void;\n}\n\ntype HoverProps = {\n  onMouseEnter: () => void;\n  onMouseLeave: () => void;\n  onTouchStart: () => void;\n  onTouchMove: () => void;\n  onTouchEnd: () => void;\n};\n\ntype TimeoutState = \"entering\" | \"leaving\" | null;\n\nfunction useHover(config?: Config): readonly [boolean, HoverProps];\nfunction useHover(config?: CallbackConfig): HoverProps;\nfunction useHover(config?: any): any {\n  const {\n    delayEnter = 0,\n    delayLeave = 0,\n    hideOnScroll = true,\n    onShow,\n    onHide\n  } = (config || {}) as CallbackConfig;\n\n  const [show, setShow] = React.useState(false);\n  const timeoutRef = React.useRef<number | null>(null);\n\n  const timeoutState = React.useRef<TimeoutState>(null);\n\n  const hasTouchMoved = React.useRef<boolean>(false);\n\n  function handleShowHide(show: boolean) {\n    if (show) {\n      if (onShow) {\n        onShow();\n      }\n\n      setShow(true);\n      return;\n    }\n\n    if (onHide) {\n      onHide();\n    }\n\n    setShow(false);\n  }\n\n  function onMouseEnter() {\n    // if was leaving, stop leaving\n    if (timeoutState.current === \"leaving\" && timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n      timeoutState.current = null;\n    }\n\n    if (show) {\n      return;\n    }\n\n    timeoutState.current = \"entering\";\n    timeoutRef.current = setTimeout(() => {\n      handleShowHide(true);\n      timeoutRef.current = null;\n      timeoutState.current = null;\n    }, delayEnter) as any;\n  }\n\n  function onMouseLeave() {\n    // if was waiting for entering,\n    // clear timeout\n    if (timeoutState.current === \"entering\" && timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n\n    if (!show) {\n      return;\n    }\n\n    timeoutState.current = \"leaving\";\n    timeoutRef.current = setTimeout(() => {\n      handleShowHide(false);\n      timeoutRef.current = null;\n    }, delayLeave) as any;\n  }\n\n  // make sure to clear timeout on unmount\n  React.useEffect(() => {\n    const to = timeoutRef.current;\n\n    function clear() {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    }\n\n    function onScroll() {\n      if (show && hideOnScroll) {\n        clear();\n        handleShowHide(false);\n      }\n    }\n\n    function onTouchEnd() {\n      if (show) {\n        clear();\n        handleShowHide(false);\n      }\n    }\n\n    window.addEventListener(\"scroll\", onScroll, true);\n    window.addEventListener(\"touchend\", onTouchEnd, true);\n\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll, true);\n      window.removeEventListener(\"touchend\", onTouchEnd, true);\n\n      if (to) {\n        clearTimeout(to);\n      }\n    };\n  }, [show, hideOnScroll]);\n\n  const hoverProps: HoverProps = {\n    onMouseEnter,\n    onMouseLeave,\n    onTouchStart: () => {\n      hasTouchMoved.current = false;\n    },\n    onTouchMove: () => {\n      hasTouchMoved.current = true;\n    },\n    onTouchEnd: () => {\n      if (!hasTouchMoved.current && !show) {\n        handleShowHide(true);\n      }\n\n      hasTouchMoved.current = false;\n    }\n  };\n\n  // @ts-ignore\n  if (onShow) {\n    return hoverProps;\n  }\n\n  return [show, hoverProps] as const;\n}\n\nexport default useHover;\n","import * as React from \"react\";\n\nexport default function useBreakpoint(maxPixels: number) {\n  const [match, setMatch] = React.useState(\n    typeof window !== \"undefined\"\n      ? window.matchMedia(`(max-width: ${maxPixels}px)`).matches\n      : false\n  );\n\n  React.useEffect(() => {\n    const matcher = window.matchMedia(`(max-width: ${maxPixels}px)`);\n\n    function onMatch(evt: MediaQueryListEvent) {\n      setMatch(evt.matches);\n    }\n\n    matcher.addListener(onMatch);\n\n    return () => {\n      matcher.removeListener(onMatch);\n    };\n  }, [maxPixels]);\n\n  return match;\n}\n","import * as React from \"react\";\n\ntype TransitionProps = {\n  isOpen: boolean;\n  children: (\n    isOpen: boolean,\n    onTransitionEnd: any,\n    isLeaving: boolean\n  ) => React.ReactElement;\n};\n\nexport default function Transition({\n  isOpen: isOpenExternal,\n  children\n}: TransitionProps) {\n  const [state, setState] = React.useState({\n    isOpenInternal: isOpenExternal,\n    isLeaving: false\n  });\n\n  const didMount = React.useRef(false);\n\n  React.useEffect(() => {\n    if (isOpenExternal) {\n      setState({\n        isOpenInternal: true,\n        isLeaving: false\n      });\n    } else if (didMount.current) {\n      setState({\n        isOpenInternal: false,\n        isLeaving: true\n      });\n    }\n  }, [isOpenExternal, setState]);\n\n  React.useEffect(() => {\n    didMount.current = true;\n  }, []);\n\n  if (!isOpenExternal && !state.isOpenInternal && !state.isLeaving) {\n    return null;\n  }\n\n  return children(\n    state.isOpenInternal,\n    () => {\n      if (!state.isOpenInternal) {\n        setState(s => ({ ...s, isLeaving: false }));\n      }\n    },\n    state.isLeaving\n  );\n}\n","import * as React from \"react\";\n\nimport useHover, { Config } from \"./useHover\";\nimport useToggleLayer from \"./ToggleLayer/useToggleLayer\";\nimport { ToggleLayerOptions, RenderLayer } from \"./ToggleLayer/types\";\n\ntype Options = Config & ToggleLayerOptions;\n\nexport default function useTooltip(\n  renderLayer: RenderLayer,\n  { delayEnter, delayLeave, hideOnScroll, ...rest }: Options = {}\n) {\n  const triggerRef = React.useRef<any>();\n\n  const [element, { openFromRef, close }] = useToggleLayer(renderLayer, rest);\n\n  const hoverProps = useHover({\n    delayEnter,\n    delayLeave,\n    hideOnScroll,\n    onShow: () => openFromRef(triggerRef),\n    onHide: close\n  });\n\n  const triggerProps = {\n    ref: triggerRef,\n    ...hoverProps\n  };\n\n  return [element, triggerProps] as const;\n}\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","useEvent","element","event","callback","enabled","capture","React","cb","el","Array","isArray","ev","forEach","e","addEventListener","removeEventListener","OutsideClickContext","createContext","isChildOf","parent","hasChildren","children","child","OutsideClickGroupProvider","refs","isPartOfGroup","useContext","useCallback","layerRef","current","add","useRegisterGroup","registerRefToGroup","useEffect","values","useOutsideClick","events","useState","document","evt","ref","useOnScroll","elements","onScroll","environment","trackScroll","memoElements","useOnWindowResize","onResize","trackResize","useIsomorphicLayoutEffect","window","useTrackElementResize","injectedResizeObserver","triggerElement","isOpen","callbackRef","ResizeObserver","Error","resizeObserver","observe","unobserve","disconnect","EMPTY_STYLE","isSet","value","undefined","areStylesTheSame","a","b","aKeys","bKeys","Math","max","shouldUpdateStyles","prev","next","layer","arrow","getWindowClientRect","top","left","right","innerWidth","bottom","innerHeight","height","width","convertFloat","parseFloat","replace","getContentBox","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","getComputedStyle","reduce","total","clientRectToObject","clientRect","getElementFromAnchorNode","anchorNode","currentElement","getBoundingClientRect","parentElement","minMax","min","useStyleState","anchor","INITIAL_STYLES","layerSide","split","toLowerCase","styles","setStyles","lastStyles","resetLastStyles","Anchor","BOTTOM_LEFT","BOTTOM_RIGHT","BOTTOM_CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","LEFT_BOTTOM","LEFT_CENTER","LEFT_TOP","RIGHT_BOTTOM","RIGHT_CENTER","RIGHT_TOP","POSSIBLE_ANCHORS","getPrimaryDirection","startsWith","primaryIsY","primary","getPrimaryByIndex","index","preferedPrimary","preferedX","preferedY","prefferedIsY","filter","x","getSecondaryByIndex","preferedSecondary","rects","triggerHasBiggerHeight","trigger","triggerHasBiggerWidth","getSecondaryAnchorOptionsByPrimary","anchorOptions","splitAnchor","secondary","getLayerSideByAnchor","getAnchorPriority","preferedAnchor","possibleAnchors","anchors","map","_","getPrimaryStyle","scroll","triggerOffset","prop","size","relativeParent","getCenter","offsetSecondary","getLimits","topBase","leftBase","getSecondaryStyle","primaryDirection","getAbsolutePositions","scrollLeft","scrollTop","fixLayerDimensions","originalLayer","layerDimensions","dimensions","propMap","TOP","side1","side2","factor","BOTTOM","LEFT","RIGHT","getPrimaryRect","getSecondaryRect","getLayerRectByAnchor","scrollOffset","primaryRect","secondaryRect","layerRect","result","ALL_OFFSET_SIDES","getLayerOffsetsToParent","getLayerOffsetsToParents","parents","isLayerCompletelyInvisible","some","doesEntireLayerFitWithinScrollParents","parentOffsets","every","offsets","side","reduceOffsets","parentOffsetsCombined","sort","getNegativeOffsetSides","getVisibleLayerSurface","rect","affectedProperty","getVisibleLayerSurfaceWithinScrollParent","surfaces","doesAnchorFitWithinScrollParents","scrollParents","getLayerOffsetsToScrollParentsByAnchor","triggerIsBiggerThanLayer","getOffsetSurface","primarySize","secondarySize","findAnchorByLayerSurface","surface","offsetSurface","square","findBestSuitableAnchor","find","getSecondaryOffsetSide","currentAnchor","firstAnchorThatDoesNotFit","sides","findSecondaryOffset","secondaryAnchorOptions","currentAnchorHasHighestPriority","currentAnchorFits","affectedSide","currentOffsets","secondaryOffset","triggerIsBigger","isCenter","includes","isLeft","isTop","getOffsets","getArrowStyle","limitsDefault","getAbsoluteStyle","autoAdjust","snapToAnchor","possibleAnchorsByPriority","getSuitableAnchor","getSecondaryOffset","layerStyle","compensateScrollbars","clientWidth","clientHeight","scrollbarWidth","scrollbarHeight","getArrowRect","layerElement","arrowOffset","arrowElement","querySelector","defaultPlacement","preferX","preferY","getPositioning","triggerRect","relativeParentElement","placement","fixed","scrollParentRects","options","body","layerBox","arrowStyle","useElementRef","initialState","elementToState","state","setState","lastElement","setRef","node","findScrollContainers","overflow","overflowX","overflowY","push","useElementState","container","style","position","process","env","NODE_ENV","containerElement","shouldWarnAboutPositionStyle","console","error","useIsOpen","internal","external","shouldOpenAfterMount","rerenderAfterMount","ToggleLayer","renderLayer","onStyle","isOpenExternal","closeOnOutsideClick","onOutsideClick","onDisappear","closeOnDisappear","props","triggerRef","normalTriggerRef","isOpenInternal","setOpenInternal","handlePositioning","hasOnDisappear","shouldCloseOnDisappear","allScrollParents","partial","full","styleIsSetInterally","effectBecauseOfInternalStyleChange","outsideClickRefs","Set","React.createElement","close","open","toggle","createPortal","layerProps","willChange","getWidthBasedOnAngle","angle","tan","PI","getViewBox","sizeA","sizeB","borderWidth","getTrianglePath","roundness","relativeRoundness","A","B","cPoint","c1A","c1B","C","d1A","d1B","D","getBorderMaskPath","borderOffset","Arrow","borderColor","backgroundColor","transform","useToggleLayer","setTargetRef","targetElement","triggerRectRef","getTriggerRect","setOpen","payload","openFromContextMenuEvent","preventDefault","clientY","clientX","openFromMouseEvent","currentTarget","openFromRef","openFromSelection","selection","isCollapsed","range","getRangeAt","useHover","config","delayEnter","delayLeave","hideOnScroll","onShow","onHide","show","setShow","timeoutRef","timeoutState","hasTouchMoved","handleShowHide","onMouseEnter","clearTimeout","setTimeout","onMouseLeave","to","clear","onTouchEnd","hoverProps","onTouchStart","onTouchMove","useBreakpoint","maxPixels","match","setMatch","matchMedia","matches","matcher","onMatch","addListener","removeListener","Transition","isLeaving","didMount","s","useTooltip","rest","triggerProps"],"mappings":"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"}