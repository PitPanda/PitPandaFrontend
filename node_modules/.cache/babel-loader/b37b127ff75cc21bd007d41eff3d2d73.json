{"ast":null,"code":"import _classCallCheck from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import SearchField from'../SearchField/SearchField';import StaticCard from'../Cards/StaticCard';import pitMaster from'../../pitMaster.json';import uuid from'uuid';var Mystics=pitMaster.Pit.Mystics;Object.values(Mystics).forEach(function(ench){ench.Classes.forEach(function(cls){if(!Mystics[cls])Mystics[cls]={Name:\"\\xA7f\".concat(cls.charAt(0).toUpperCase()+cls.slice(1)),Type:'any'};});});Mystics.pants={Name:'§fPants',Type:'pants',NoNumber:true};Mystics.sword={Name:'§fSword',Type:'sword',NoNumber:true};Mystics.bow={Name:'§fBow',Type:'bow',NoNumber:true};Mystics.gemmed={Name:'§fGemmed',Type:'any',NoNumber:true};Mystics.lives={Name:'§fLives',Type:'any'};Mystics.maxLives={Name:'§fMax Lives',Type:'any'};Mystics.tokens={Name:'§fTokens',Type:'any'};Mystics.artifact={Name:'§fArtifact',Type:'any',NoNumber:true};Mystics.rare={Name:'§fRare',Type:'any',NoNumber:true};Mystics.legendary={Name:'§fLegendary',Type:'any',NoNumber:true};Mystics.bountiful={Name:'§fBountiful',Type:'any',NoNumber:true};Mystics.combolicious={Name:'§fCombolicious',Type:'any',NoNumber:true};Mystics.extraordinary={Name:'§fExtraordinary',Type:'any',NoNumber:true};Mystics.unthinkable={Name:'§fUnthinkable',Type:'any',NoNumber:true};Mystics.overpowered={Name:'§fOverpowered',Type:'any',NoNumber:true};Mystics.miraculous={Name:'§fMiraculous',Type:'any',NoNumber:true};Mystics.million={Name:'§fOne in a Million',Type:'any',NoNumber:true};Mystics.nonce={Name:'§fNonce',Type:'any'};Mystics.color={Name:'§fColor',Type:'pants',Colors:{red:'0',yellow:'1',blue:'2',orange:'3',green:'4'}};Mystics['color0']={Name:'§fRed',Type:'pants',NoNumber:true};Mystics['color1']={Name:'§fYellow',Type:'pants',NoNumber:true};Mystics['color2']={Name:'§fBlue',Type:'pants',NoNumber:true};Mystics['color3']={Name:'§fOrange',Type:'pants',NoNumber:true};Mystics['color4']={Name:'§fGreen',Type:'pants',NoNumber:true};var valid=['pants','sword','bow','any'];var formatted=Object.entries(Mystics).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),ench=_ref2[1];return valid.includes(ench.Type);}).sort(function(_ref3,_ref4){var _ref5=_slicedToArray(_ref3,2),a=_ref5[1];var _ref6=_slicedToArray(_ref4,2),b=_ref6[1];return a.Name.substring(a.Name.indexOf('§9')+2)<b.Name.substring(b.Name.indexOf('§9')+2)?-1:1;});function createInputData(){return{id:uuid.v4(),ref:React.createRef(),reporting:'',says:''};}var QueryBox=/*#__PURE__*/function(_React$Component){_inherits(QueryBox,_React$Component);var _super=_createSuper(QueryBox);function QueryBox(){var _this;_classCallCheck(this,QueryBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={inputs:[createInputData()]};_this.buttonRef=React.createRef();_this.killInput=function(index){if(index!==_this.state.inputs.length-1&&index!==0||index!==0&&_this.state.inputs[index-1].report===''){var inputs=_this.state.inputs;inputs[index-1].ref.current.focus();inputs[index-1].says+='_';clearTimeout(inputs[index].timeout);inputs=inputs.slice(0,index).concat(inputs.slice(index+1));_this.setState({inputs:inputs});}};_this.timeOutFix=function(timeout,index){var inputs=_this.state.inputs;inputs[index].timeout=timeout;_this.setState({inputs:inputs});};_this.monitorInputs=function(report,raw,index){var inputs=_this.state.inputs;inputs[index].reporting=report;inputs[index].says=raw;if(index+1===inputs.length){inputs.push(createInputData());}_this.setState({inputs:inputs});};_this.buildAndSendQuery=function(){var inputs=_this.state.inputs;var toClear=inputs.filter(function(input,index){return input.reporting===''&&index!==inputs.length-1;});toClear.forEach(function(input){return clearTimeout(input.timeout);});inputs=inputs.filter(function(input,index){return input.reporting!==''||index===inputs.length-1;});var queryString=inputs.slice(0,-1).map(function(i){return i.reporting;}).join();_this.props.query(queryString);_this.setState({inputs:inputs});};_this.focus=function(index){if(_this.state.inputs[index]){_this.state.inputs[index].ref.current.focus();}else if(index>=_this.state.inputs.length)_this.buttonRef.current.focus();};return _this;}_createClass(QueryBox,[{key:\"render\",value:function render(){var _this2=this;var suggestions=formatted;if(this.state.type!=='*')suggestions=suggestions.filter(function(_ref7){var _ref8=_slicedToArray(_ref7,2),ench=_ref8[1];return['any',_this2.state.type].includes(ench.Type);});return/*#__PURE__*/React.createElement(StaticCard,{title:\"Query\",style:{width:'350px',display:'inline-block',verticalAlign:'top',margin:'20px',textAlign:'left'}},this.state.inputs.map(function(input,index){return/*#__PURE__*/React.createElement(SearchField,{up:function up(){return _this2.focus(index-1);},down:function down(){return _this2.focus(index+1);},says:input.says,timeOutFix:function timeOutFix(timeout){return _this2.timeOutFix(timeout,index);},kill:function kill(e){return _this2.killInput(index);},key:input.id,mainRef:input.ref,suggestions:suggestions,report:function report(a,b){return _this2.monitorInputs(a,b,index);}});}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.buildAndSendQuery,onKeyDown:function onKeyDown(e){if(e.keyCode===38)_this2.focus(_this2.state.inputs.length-1);},ref:this.buttonRef,className:\"srchBtn\",style:{marginTop:'0px'}},\"Search\"));}}]);return QueryBox;}(React.Component);export default QueryBox;","map":{"version":3,"sources":["/home/mcpqndq/repos/PitPandaProduction/frontEnd/src/Components/QueryBox/QueryBox.js"],"names":["React","SearchField","StaticCard","pitMaster","uuid","Mystics","Pit","Object","values","forEach","ench","Classes","cls","Name","charAt","toUpperCase","slice","Type","pants","NoNumber","sword","bow","gemmed","lives","maxLives","tokens","artifact","rare","legendary","bountiful","combolicious","extraordinary","unthinkable","overpowered","miraculous","million","nonce","color","Colors","red","yellow","blue","orange","green","valid","formatted","entries","filter","includes","sort","a","b","substring","indexOf","createInputData","id","v4","ref","createRef","reporting","says","QueryBox","state","inputs","buttonRef","killInput","index","length","report","current","focus","clearTimeout","timeout","concat","setState","timeOutFix","monitorInputs","raw","push","buildAndSendQuery","toClear","input","queryString","map","i","join","props","query","suggestions","type","width","display","verticalAlign","margin","textAlign","e","keyCode","marginTop","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SearchField from '../SearchField/SearchField';\nimport StaticCard from '../Cards/StaticCard';\nimport pitMaster from '../../pitMaster.json';\nimport uuid from 'uuid';\n\nlet Mystics = pitMaster.Pit.Mystics;\n\nObject.values(Mystics).forEach(ench=>{\n    ench.Classes.forEach(cls=>{\n        if(!Mystics[cls]) Mystics[cls] = {Name:`§f${cls.charAt(0).toUpperCase() + cls.slice(1)}`,Type:'any'};\n    })\n});\n\nMystics.pants = {Name:'§fPants',Type:'pants',NoNumber:true};\nMystics.sword = {Name:'§fSword',Type:'sword',NoNumber:true};\nMystics.bow = {Name:'§fBow',Type:'bow',NoNumber:true};\nMystics.gemmed = {Name:'§fGemmed',Type:'any',NoNumber:true};\nMystics.lives = {Name:'§fLives',Type:'any'};\nMystics.maxLives = {Name:'§fMax Lives',Type:'any'};\nMystics.tokens = {Name:'§fTokens',Type:'any'};\nMystics.artifact = {Name:'§fArtifact',Type:'any',NoNumber:true};\nMystics.rare = {Name:'§fRare',Type:'any',NoNumber:true};\nMystics.legendary = {Name:'§fLegendary',Type:'any',NoNumber:true};\nMystics.bountiful = {Name:'§fBountiful',Type:'any',NoNumber:true};\nMystics.combolicious = {Name:'§fCombolicious',Type:'any',NoNumber:true};\nMystics.extraordinary = {Name:'§fExtraordinary',Type:'any',NoNumber:true};\nMystics.unthinkable = {Name:'§fUnthinkable',Type:'any',NoNumber:true};\nMystics.overpowered = {Name:'§fOverpowered',Type:'any',NoNumber:true};\nMystics.miraculous = {Name:'§fMiraculous',Type:'any',NoNumber:true};\nMystics.million = {Name:'§fOne in a Million',Type:'any',NoNumber:true};\nMystics.nonce = {Name:'§fNonce',Type:'any'};\nMystics.color = {Name:'§fColor',Type:'pants',Colors:{\n    red:'0',\n    yellow:'1',\n    blue:'2',\n    orange:'3',\n    green:'4'\n}};\nMystics['color0'] = {Name:'§fRed',Type:'pants',NoNumber:true};\nMystics['color1'] = {Name:'§fYellow',Type:'pants',NoNumber:true};\nMystics['color2'] = {Name:'§fBlue',Type:'pants',NoNumber:true};\nMystics['color3'] = {Name:'§fOrange',Type:'pants',NoNumber:true};\nMystics['color4'] = {Name:'§fGreen',Type:'pants',NoNumber:true};\n\nconst valid = ['pants','sword','bow','any'];\nconst formatted = Object.entries(Mystics)\n    .filter(([,ench])=>valid.includes(ench.Type))\n    .sort(([,a],[,b])=>a.Name.substring(a.Name.indexOf('§9')+2)<b.Name.substring(b.Name.indexOf('§9')+2)?-1:1);\n\nfunction createInputData(){\n    return {id:uuid.v4(),ref:React.createRef(),reporting:'',says:''};\n}\n\nclass QueryBox extends React.Component{\n\n    state={\n        inputs:[createInputData()],\n    }\n    buttonRef=React.createRef();\n\n    killInput = (index) => {\n        if((index!==this.state.inputs.length-1&&index!==0)||(index!==0&&this.state.inputs[index-1].report==='')){\n            let inputs = this.state.inputs;\n            inputs[index-1].ref.current.focus();\n            inputs[index-1].says+='_';\n            clearTimeout(inputs[index].timeout)\n            inputs = inputs.slice(0,index).concat(inputs.slice(index+1));\n            this.setState({inputs});\n        }\n    }\n\n    timeOutFix = (timeout,index) => {\n        let inputs = this.state.inputs;\n        inputs[index].timeout=timeout;\n        this.setState({inputs});\n    }\n\n    monitorInputs = (report,raw,index) => {\n        let inputs = this.state.inputs;\n        inputs[index].reporting=report;\n        inputs[index].says=raw;\n        if(index+1===inputs.length){\n            inputs.push(createInputData());\n        }\n        this.setState({inputs});\n    }\n\n    buildAndSendQuery = () => {\n        let inputs = this.state.inputs;\n        let toClear = inputs.filter((input,index)=>(input.reporting==='')&&index!==inputs.length-1);\n        toClear.forEach(input=>clearTimeout(input.timeout))\n        inputs = inputs.filter((input,index)=>(input.reporting!=='')||index===inputs.length-1);\n        let queryString = inputs.slice(0,-1).map(i=>i.reporting).join();\n        this.props.query(queryString);\n        this.setState({inputs});\n    }\n\n    focus = (index) => {\n        if(this.state.inputs[index]){\n            this.state.inputs[index].ref.current.focus();\n        }else if(index>=this.state.inputs.length) this.buttonRef.current.focus();\n    }\n\n    render(){\n        let suggestions = formatted;\n        if(this.state.type!=='*') suggestions = suggestions.filter(([,ench])=>['any',this.state.type].includes(ench.Type));\n        return (\n            <StaticCard title=\"Query\" style={{width:'350px',display:'inline-block',verticalAlign:'top',margin:'20px',textAlign:'left'}}>\n                {this.state.inputs.map((input,index)=>(\n                    <SearchField \n                        up={()=>this.focus(index-1)} \n                        down={()=>this.focus(index+1)} \n                        says={input.says} \n                        timeOutFix={timeout=>this.timeOutFix(timeout,index)} \n                        kill={e=>this.killInput(index)} \n                        key={input.id} \n                        mainRef={input.ref} \n                        suggestions={suggestions} \n                        report={(a,b)=>this.monitorInputs(a,b,index)}\n                    />\n                ))}\n                <button \n                    onClick={this.buildAndSendQuery} \n                    onKeyDown={e=>{if(e.keyCode===38)this.focus(this.state.inputs.length-1);}} \n                    ref={this.buttonRef} \n                    className='srchBtn' \n                    style={{marginTop:'0px'}}\n                >Search</button>\n            </StaticCard>\n        );\n    }\n}\n\nexport default QueryBox;\n"]},"metadata":{},"sourceType":"module"}