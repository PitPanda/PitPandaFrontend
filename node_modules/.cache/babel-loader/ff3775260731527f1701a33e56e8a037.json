{"ast":null,"code":"import _regeneratorRuntime from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mcpqndq/repos/PitPandaProduction/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import MinecraftInventory from'../Minecraft/MinecraftInventory';import StaticCard from'../Cards/StaticCard';import QueryBox from'../QueryBox/QueryBox';import getName,{cache}from'../../scripts/playerName';import{withRouter}from'react-router-dom';var pageSize=72;var ItemSearch=/*#__PURE__*/function(_React$Component){_inherits(ItemSearch,_React$Component);var _super=_createSuper(ItemSearch);function ItemSearch(){var _this;_classCallCheck(this,ItemSearch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={results:new Array(9).fill({fake:true}),loading:false,lastsize:0,page:0,queryString:''};_this.query=function(queryString){if(queryString.length===0)return _this.setState({results:new Array(9).fill({fake:true}),loading:false,lastsize:0,page:0,queryString:queryString});if(_this.state.queryString===queryString)return;_this.setState({loading:true,page:0,queryString:queryString});fetch('/api/itemsearch/'+queryString).then(function(res){return res.json();}).then(function(json){if(!json.success)return;_this.readyItems(json.items);var result=json.items.map(function(item){return item.item;});console.log(json);_this.setState({results:result,loading:false,lastsize:result.length});});};_this.updatePath=function(queryString){return _this.props.history.push(\"/itemsearch/\".concat(queryString));};_this.requestOwner=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(index){var results,owner,targets,doc,result,_iterator,_step,item,_iterator2,_step2,_item,_iterator3,_step3,_item2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!_this.state.results[index].fake&&!_this.state.results[index].checked)){_context.next=15;break;}results=_this.state.results;owner=results[index].owner;targets=results.filter(function(item){return item.owner===owner;});doc=getName(owner);result=doc.result;if(result){_context.next=13;break;}_iterator=_createForOfIteratorHelper(targets);try{for(_iterator.s();!(_step=_iterator.n()).done;){item=_step.value;item.checked=true;item.desc[0]='§7Owner: Loading';}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({results:results});_context.next=12;return doc.promise;case 12:result=_context.sent;case 13:if(result.error){_iterator2=_createForOfIteratorHelper(targets);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_item=_step2.value;_item.checked=false;_item.desc[0]='§7Owner: §4ERROR';}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.error(result.error);}else{_iterator3=_createForOfIteratorHelper(targets);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){_item2=_step3.value;_item2.desc[0]=\"\\xA77Owner: \".concat(result);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}_this.setState({results:results});case 15:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.readyItems=function(items){var _iterator4=_createForOfIteratorHelper(items),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;item.item.desc.unshift('§7Lastseen: '+new Date(item.lastseen*1000).toLocaleString());if(cache[item.owner]&&cache[item.owner].result){item.item.desc.unshift('§7Owner: '+cache[item.owner].result);item.item.checked=true;}else{item.item.desc.unshift('§7Owner: Click to request');item.item.checked=false;}item.item.uuid=item.id;item.item.owner=item.owner;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}};_this.loadMore=function(){_this.setState({loading:true,page:_this.state.page+1});fetch(\"/api/itemSearch/\".concat(_this.state.queryString,\"/\").concat(_this.state.page+1)).then(function(res){return res.json();}).then(function(json){if(!json.success)return;_this.readyItems(json.items);var results=_this.state.results;results=results.concat(json.items.map(function(item){return item.item;}));console.log(json);_this.setState({results:results,loading:false,lastsize:json.items.length});});};_this.directToOwner=function(i,e){e.preventDefault();if(_this.state.results[i].fake)return;if(!e.ctrlKey){_this.props.history.push(\"/players/\".concat(_this.state.results[i].owner));}else{var path=\"\".concat(window.location.origin,\"/players/\").concat(_this.state.results[i].owner);var win=window.open(path);win.focus();}};return _this;}_createClass(ItemSearch,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.match.params.query)this.query(this.props.match.params.query);this.unlisten=this.props.history.listen(function(location){_this2.query(location.pathname.substring('/itemsearch/'.length));});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unlisten();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"h1\",{className:\"page-header\",style:{marginBottom:'200px'}},\"Pit Panda Mystic Search\"),/*#__PURE__*/React.createElement(QueryBox,{query:this.updatePath}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'inline-block',textAlign:'left',margin:'20px'}},/*#__PURE__*/React.createElement(StaticCard,{title:\"Results\"},/*#__PURE__*/React.createElement(MinecraftInventory,{style:{display:'block'},key:this.state.queryString,inventory:this.state.results,onContextMenu:this.directToOwner,onClick:this.requestOwner,colors:true}),this.state.lastsize===pageSize&&this.state.results.length!==0&&!this.state.loading?/*#__PURE__*/React.createElement(\"div\",{style:{margin:'auto',textAlign:'center'}},/*#__PURE__*/React.createElement(\"button\",{onClick:this.loadMore,className:\"srchBtn\"},\"Load More\")):'')));}}]);return ItemSearch;}(React.Component);export default withRouter(ItemSearch);","map":{"version":3,"sources":["/home/mcpqndq/repos/PitPandaProduction/frontEnd/src/Components/Apps/ItemSearch.js"],"names":["React","MinecraftInventory","StaticCard","QueryBox","getName","cache","withRouter","pageSize","ItemSearch","state","results","Array","fill","fake","loading","lastsize","page","queryString","query","length","setState","fetch","then","res","json","success","readyItems","items","result","map","item","console","log","updatePath","props","history","push","requestOwner","index","checked","owner","targets","filter","doc","desc","promise","error","unshift","Date","lastseen","toLocaleString","uuid","id","loadMore","concat","directToOwner","i","e","preventDefault","ctrlKey","path","window","location","origin","win","open","focus","match","params","unlisten","listen","pathname","substring","textAlign","marginBottom","display","margin","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MinecraftInventory from '../Minecraft/MinecraftInventory';\nimport StaticCard from '../Cards/StaticCard';\nimport QueryBox from '../QueryBox/QueryBox';\nimport getName, {cache} from '../../scripts/playerName';\nimport { withRouter } from 'react-router-dom';\n\nconst pageSize = 72;\nclass ItemSearch extends React.Component {\n    state={\n        results:new Array(9).fill({fake:true}),\n        loading:false,\n        lastsize:0,\n        page:0,\n        queryString:''\n    };\n\n    componentDidMount(){\n        if(this.props.match.params.query) this.query(this.props.match.params.query);\n        this.unlisten = this.props.history.listen((location)=>{\n            this.query(location.pathname.substring('/itemsearch/'.length));\n        });\n    }\n\n    componentWillUnmount(){\n        this.unlisten();\n    }\n\n    query=(queryString)=>{\n        if(queryString.length===0)\n            return this.setState({results:new Array(9).fill({fake:true}),loading:false,lastsize:0,page:0,queryString});\n        if(this.state.queryString===queryString) return;\n        this.setState({loading:true,page:0,queryString});\n        fetch('/api/itemsearch/'+queryString).then(res=>res.json()).then(json => {\n            if(!json.success) return;\n            this.readyItems(json.items);\n            const result = json.items.map(item=>item.item);\n            console.log(json);\n            this.setState({results:result,loading:false,lastsize:result.length});\n        });\n    }\n\n    updatePath=(queryString)=>this.props.history.push(`/itemsearch/${queryString}`);\n    \n    requestOwner= async (index)=>{\n        if(!this.state.results[index].fake&&!this.state.results[index].checked){\n            let results = this.state.results;\n            let owner = results[index].owner;\n\n            let targets = results.filter(item=>item.owner===owner);\n\n            let doc = getName(owner);\n            let result = doc.result;\n\n            if(!result){\n                for(let item of targets){\n                    item.checked = true;\n                    item.desc[0] = '§7Owner: Loading';\n                }\n                this.setState({results});\n                result = await doc.promise;\n            }\n            if(result.error) {\n                for(let item of targets){\n                    item.checked = false;\n                    item.desc[0] = '§7Owner: §4ERROR';\n                }\n                console.error(result.error);\n            }else{\n                for(let item of targets){\n                    item.desc[0] = `§7Owner: ${result}`;\n                }\n            }\n            this.setState({results});\n        }\n    }\n\n    readyItems = (items) => {\n        for(let item of items){\n            item.item.desc.unshift('§7Lastseen: '+new Date(item.lastseen*1000).toLocaleString());\n            if(cache[item.owner]&&cache[item.owner].result) {\n                item.item.desc.unshift('§7Owner: '+cache[item.owner].result);\n                item.item.checked = true;\n            }\n            else {\n                item.item.desc.unshift('§7Owner: Click to request');\n                item.item.checked = false;\n            }\n            item.item.uuid = item.id;\n            item.item.owner = item.owner;\n        }\n    }\n\n    loadMore = () => {\n        this.setState({loading:true,page:this.state.page+1})\n        fetch(`/api/itemSearch/${this.state.queryString}/${this.state.page+1}`).then(res=>res.json()).then(json => {\n            if(!json.success) return;\n            this.readyItems(json.items);\n            let results = this.state.results;\n            results = results.concat(json.items.map(item=>item.item));\n            console.log(json);\n            this.setState({results,loading:false,lastsize:json.items.length});\n        });\n    }\n\n    directToOwner = (i,e) =>{\n        e.preventDefault();\n        if(this.state.results[i].fake)return;\n        if(!e.ctrlKey){\n            this.props.history.push(`/players/${this.state.results[i].owner}`);\n        }else{\n            let path = `${window.location.origin}/players/${this.state.results[i].owner}`;\n            let win = window.open(path);\n            win.focus();\n        }\n    }\n\n    render() {\n        return (\n            <div style={{textAlign:'center'}}>\n                <h1 className=\"page-header\" style={{marginBottom:'200px'}}>Pit Panda Mystic Search</h1>\n                <QueryBox query={this.updatePath}/>\n                <div style={{display:'inline-block',textAlign:'left',margin:'20px'}}>\n                    <StaticCard title=\"Results\">\n                        <MinecraftInventory style={{display:'block'}} key={this.state.queryString} inventory={this.state.results} onContextMenu={this.directToOwner} onClick={this.requestOwner} colors={true}/>\n                        {this.state.lastsize===pageSize&&this.state.results.length!==0&&!this.state.loading?\n                        <div style={{margin:'auto',textAlign:'center'}}>\n                            <button onClick={this.loadMore} className='srchBtn'>Load More</button>\n                        </div>:''}\n                    </StaticCard>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(ItemSearch);"]},"metadata":{},"sourceType":"module"}